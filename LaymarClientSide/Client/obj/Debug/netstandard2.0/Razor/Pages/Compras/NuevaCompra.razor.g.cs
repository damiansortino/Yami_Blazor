#pragma checksum "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "aeae17411b0a96b496783a669fbda07dd7d59b06"
// <auto-generated/>
#pragma warning disable 1591
namespace LaymarClientSide.Client.Pages.Compras
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client;

#line default
#line hidden
#line 7 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Shared;

#line default
#line hidden
#line 9 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Helpers;

#line default
#line hidden
#line 10 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Shared;

#line default
#line hidden
#line 11 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 12 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml;

#line default
#line hidden
#line 13 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml.Style;

#line default
#line hidden
#line 14 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Drawing;

#line default
#line hidden
#line 1 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
using LaymarClientSide.Shared.Entidades;

#line default
#line hidden
#line 6 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
using LaymarClientSide.Shared.Dtos;

#line default
#line hidden
#line 7 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
using System.Security.Claims;

#line default
#line hidden
#line 8 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
           [Authorize(Roles = "Compras, Admin")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.RouteAttribute("/nuevaCompra")]
    public partial class NuevaCompra : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(0);
            __builder.AddAttribute(1, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context) => (__builder2) => {
                __builder2.AddMarkupContent(2, "\r\n\r\n\r\n\r\n        ");
                __builder2.OpenElement(3, "div");
                __builder2.AddAttribute(4, "class", "bg-light mt-2");
                __builder2.AddMarkupContent(5, "\r\n\r\n            ");
                __builder2.OpenElement(6, "fieldset");
                __builder2.AddAttribute(7, "id", "FieldSetFormulario");
                __builder2.AddAttribute(8, "class", "border border-solid rounded p-0 m-0");
                __builder2.AddMarkupContent(9, "\r\n\r\n                ");
                __builder2.OpenElement(10, "div");
                __builder2.AddAttribute(11, "class", "bg-light");
                __builder2.AddMarkupContent(12, "\r\n                    ");
                __builder2.AddMarkupContent(13, "<div class=\"row 2 mx-0 mb-2 border-top border-solid bg-dark text-white px-4 pt-3\"><h3><strong>DATOS DE LA COMPRA</strong></h3></div>\r\n\r\n                    ");
                __builder2.OpenElement(14, "div");
                __builder2.AddAttribute(15, "class", "justify-content-end d-flex row col-md-12 mt-4 mx-0 form-inline");
                __builder2.AddMarkupContent(16, "\r\n                        ");
                __builder2.OpenElement(17, "h5");
                __builder2.AddAttribute(18, "class", "col-md-9");
                __builder2.AddMarkupContent(19, "\r\n\r\n                            ");
                __builder2.AddMarkupContent(20, "<span class=\"badge badge-light pl-4\">\r\n                                <strong>PROVEEDOR:</strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(21, "input");
                __builder2.AddAttribute(22, "style", "height:1.8rem;");
                __builder2.AddAttribute(23, "class", "col-md-3 form-control");
                __builder2.AddAttribute(24, "type", "number");
                __builder2.AddAttribute(25, "placeholder", "CÃ³digo Proveedor");
                __builder2.AddAttribute(26, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 32 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                                                                                 async (KeyboardEventArgs e)=> { if(e.Key == "Enter"){AccionModal = ""; await buscarProveedor(); } }

#line default
#line hidden
                ));
                __builder2.AddEventStopPropagationAttribute(27, "onkeypress", true);
                __builder2.AddAttribute(28, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 32 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                   busquedaProveedor

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(29, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => busquedaProveedor = __value, busquedaProveedor, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(30, "\r\n                            ");
                __builder2.OpenElement(31, "button");
                __builder2.AddAttribute(32, "class", "btn");
                __builder2.AddAttribute(33, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 33 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                            async () => { AccionModal = "proveedor"; await ModalToggle(); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(34, "<i class=\"fas fa-search\"></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(35, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(36, "\r\n\r\n                        ");
                __builder2.OpenElement(37, "h5");
                __builder2.AddAttribute(38, "class", "col-md-3");
                __builder2.AddMarkupContent(39, "\r\n                            ");
                __builder2.AddMarkupContent(40, "<span class=\"badge badge-light\">\r\n                                <strong>FECHA: </strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(41, "strong");
                __builder2.AddMarkupContent(42, "\r\n                                ");
                __builder2.OpenElement(43, "span");
                __builder2.AddAttribute(44, "class", "badge badge-light");
                __builder2.AddMarkupContent(45, "\r\n                                    ");
                __builder2.AddContent(46, 
#line 42 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                     DateTime.Now.AddHours(-3).ToString("dd/MM/yyyy")

#line default
#line hidden
                );
                __builder2.AddMarkupContent(47, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(48, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(49, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(50, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(51, "\r\n\r\n                    ");
                __builder2.OpenElement(52, "div");
                __builder2.AddAttribute(53, "class", "row col-md-12 form-inline mx-0 ");
                __builder2.AddMarkupContent(54, "\r\n\r\n\r\n                        ");
                __builder2.OpenElement(55, "h5");
                __builder2.AddAttribute(56, "class", " col-md-9 ");
                __builder2.AddMarkupContent(57, "\r\n                            ");
                __builder2.AddMarkupContent(58, "<span class=\"badge badge-light pl-4\">\r\n                                <strong>\r\n\r\n                                    RAZON SOCIAL:\r\n                                </strong>\r\n\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(59, "span");
                __builder2.AddAttribute(60, "class", "badge badge-info text-left");
                __builder2.AddMarkupContent(61, "\r\n                                ");
                __builder2.AddContent(62, 
#line 60 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                 compra.comprobante.personaJuridica.razonSocial

#line default
#line hidden
                );
                __builder2.AddMarkupContent(63, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(64, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(65, "\r\n\r\n                        ");
                __builder2.OpenElement(66, "h5");
                __builder2.AddAttribute(67, "class", "col-md-3 ");
                __builder2.AddMarkupContent(68, "\r\n\r\n                            ");
                __builder2.AddMarkupContent(69, "<span class=\"badge badge-light \">\r\n                                <strong>SUCURSAL:</strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(70, "strong");
                __builder2.AddMarkupContent(71, "\r\n                                ");
                __builder2.OpenElement(72, "span");
                __builder2.AddAttribute(73, "class", "badge badge-info ");
                __builder2.AddMarkupContent(74, "\r\n                                    ");
                __builder2.AddContent(75, 
#line 72 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                     VariablesGlobales.sucursal.nombreSucursal

#line default
#line hidden
                );
                __builder2.AddMarkupContent(76, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(77, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(78, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(79, "\r\n\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(80, "\r\n\r\n                    ");
                __builder2.OpenElement(81, "div");
                __builder2.AddAttribute(82, "class", "justify-content-end d-flex row col-md-12 mx-0");
                __builder2.AddMarkupContent(83, "\r\n\r\n                        ");
                __builder2.OpenElement(84, "h5");
                __builder2.AddAttribute(85, "class", "mt-2 col-md-3");
                __builder2.AddMarkupContent(86, "\r\n                            ");
                __builder2.AddMarkupContent(87, "<span class=\"badge badge-light\">\r\n                                <strong>VENDEDOR: </strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(88, "strong");
                __builder2.AddMarkupContent(89, "\r\n                                ");
                __builder2.OpenElement(90, "span");
                __builder2.AddAttribute(91, "class", "badge badge-info");
                __builder2.AddMarkupContent(92, "\r\n                                    ");
                __builder2.AddContent(93, 
#line 88 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                     _context.User.Identity.Name

#line default
#line hidden
                );
                __builder2.AddMarkupContent(94, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(95, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(96, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(97, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(98, "\r\n\r\n                    ");
                __builder2.OpenElement(99, "div");
                __builder2.AddAttribute(100, "class", "row 2 mx-0 bg-dark mt-4 rounded text-white py-2 px-4");
                __builder2.AddMarkupContent(101, "\r\n                        ");
                __builder2.OpenElement(102, "div");
                __builder2.AddAttribute(103, "class", "col-md-4");
                __builder2.AddMarkupContent(104, "\r\n                            ");
                __builder2.OpenElement(105, "h5");
                __builder2.AddAttribute(106, "class", "mt-2");
                __builder2.AddMarkupContent(107, "\r\n                                <i class=\"fas fa-shopping-cart mr-1 text-info\"></i>\r\n                                ");
                __builder2.AddMarkupContent(108, "<strong>\r\n                                    ARTICULOS\r\n                                </strong>\r\n                                ");
                __builder2.OpenElement(109, "span");
                __builder2.AddAttribute(110, "class", "badge badge-info ml-1");
                __builder2.AddContent(111, 
#line 102 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                     compra.detalles.Count()

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(112, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(113, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(114, "\r\n\r\n                        ");
                __builder2.OpenElement(115, "div");
                __builder2.AddAttribute(116, "class", "col-md-8 d-flex justify-content-end");
                __builder2.AddMarkupContent(117, "\r\n");
#line 107 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                             if (compra.detalles.Count() < 50 && compra.comprobante.personaJuridica.PersonaJuridicaId != 0)
                            {


#line default
#line hidden
                __builder2.AddContent(118, "                                ");
                __builder2.OpenElement(119, "button");
                __builder2.AddAttribute(120, "class", "btn btn-info");
                __builder2.AddAttribute(121, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 110 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                         () => { compra.detalles.Add(new DetalleFactura { producto = new Producto()  }); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(122, "<i class=\"fas fa-plus-circle\"></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(123, "\r\n");
#line 111 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                            }
                            else
                            {

#line default
#line hidden
                __builder2.AddContent(124, "                                ");
                __builder2.AddMarkupContent(125, "<button class=\"btn btn-dark disabled\" disabled><i class=\"fas fa-plus-circle\"></i></button>\r\n");
#line 115 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"

                            }

#line default
#line hidden
                __builder2.AddContent(126, "                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(127, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(128, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(129, "\r\n                ");
                __builder2.OpenElement(130, "table");
                __builder2.AddAttribute(131, "class", "row col-md-12 mx-0 px-0 table px-1  table-sm mt-2 table-responsive-sm table-bordered table-hover");
                __builder2.AddMarkupContent(132, "\r\n                    ");
                __builder2.AddMarkupContent(133, @"<thead class=""bg-light col-md-12 mx-0 px-0 "">
                        <tr class=""col-md-12 row mx-0 px-0 text-center d-flex justify-content-center bg-info text-white "" style=""height:2.5rem"">
                            <th class=""col-md-2"" style=""height:2.5rem"">CODIGO</th>
                            <th class=""col-md-5"" style=""height:2.5rem"">DESCRIPCION TALLE COLOR  MARCA</th>

                            <th class=""col-md-1"" style=""height:2.5rem"">CANTIDAD</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">P/UNIDAD</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">DESC.</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">IMPORTE</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">ACCIONES</th>

                        </tr>
                    </thead>
                    ");
                __builder2.OpenElement(134, "tbody");
                __builder2.AddAttribute(135, "class", "col-md-12 mx-0 px-0");
                __builder2.AddMarkupContent(136, "\r\n");
#line 135 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                         foreach (DetalleFactura detalleFactura in compra.detalles)
                        {

#line default
#line hidden
                __builder2.AddContent(137, "                            ");
                __builder2.OpenElement(138, "tr");
                __builder2.AddAttribute(139, "class", "col-md-12 row mx-0 px-0 ");
                __builder2.AddAttribute(140, "style", "height:2.5rem");
                __builder2.AddMarkupContent(141, "\r\n                                ");
                __builder2.OpenElement(142, "td");
                __builder2.AddAttribute(143, "class", "col-md-2 form-inline text-center");
                __builder2.AddAttribute(144, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(145, "\r\n                                    ");
                __builder2.OpenElement(146, "input");
                __builder2.AddAttribute(147, "type", "text");
                __builder2.AddAttribute(148, "autofocus", true);
                __builder2.AddAttribute(149, "name", "cod");
                __builder2.AddAttribute(150, "class", " form-control col-md-8");
                __builder2.AddAttribute(151, "style", "height:1.8rem;");
                __builder2.AddAttribute(152, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 139 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                                                                                                  async(KeyboardEventArgs e)=> { if(e.Key == "Enter"){ AccionModal = ""; await buscarProducto(detalleFactura); } }

#line default
#line hidden
                ));
                __builder2.AddAttribute(153, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 139 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                detalleFactura.cadenaBusquedaProducto

#line default
#line hidden
                ));
                __builder2.AddAttribute(154, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => detalleFactura.cadenaBusquedaProducto = __value, detalleFactura.cadenaBusquedaProducto));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(155, "\r\n                                    ");
                __builder2.OpenElement(156, "button");
                __builder2.AddAttribute(157, "class", "btn col-md-4");
                __builder2.AddAttribute(158, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 140 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             (async () => { detalleActual = detalleFactura; await ModalToggle(); AccionModal = "producto"; })

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(159, "\r\n                                        <i class=\"fas fa-search\"></i>\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(160, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(161, "\r\n\r\n                                ");
                __builder2.OpenElement(162, "td");
                __builder2.AddAttribute(163, "class", "col-md-5 text-center ");
                __builder2.AddAttribute(164, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(165, "\r\n                                    ");
                __builder2.OpenElement(166, "h5");
                __builder2.AddAttribute(167, "class", "mt-1");
                __builder2.AddMarkupContent(168, "\r\n\r\n                                        ");
                __builder2.OpenElement(169, "span");
                __builder2.AddAttribute(170, "class", "badge badge-light text-center");
                __builder2.AddContent(171, 
#line 149 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                     detalleFactura.producto.nombre

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(172, "\r\n                                        ");
                __builder2.OpenElement(173, "span");
                __builder2.AddAttribute(174, "class", "badge badge-light text-center");
                __builder2.AddContent(175, 
#line 150 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                     detalleFactura.producto.talle

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(176, "\r\n\r\n                                        ");
                __builder2.OpenElement(177, "span");
                __builder2.AddAttribute(178, "class", "badge badge-light text-center");
                __builder2.AddContent(179, " ");
                __builder2.AddContent(180, 
#line 152 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                      detalleFactura.producto.color

#line default
#line hidden
                );
                __builder2.AddContent(181, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(182, "\r\n                                        ");
                __builder2.OpenElement(183, "span");
                __builder2.AddAttribute(184, "class", "badge badge-light text-center");
                __builder2.AddContent(185, " ");
                __builder2.AddContent(186, 
#line 153 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                      detalleFactura.producto.marca

#line default
#line hidden
                );
                __builder2.AddContent(187, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(188, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(189, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(190, "\r\n\r\n\r\n\r\n                                ");
                __builder2.OpenElement(191, "td");
                __builder2.AddAttribute(192, "class", "col-md-1");
                __builder2.AddAttribute(193, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(194, "\r\n                                    ");
                __builder2.OpenElement(195, "input");
                __builder2.AddAttribute(196, "type", "number");
                __builder2.AddAttribute(197, "class", "form-control col-md-12");
                __builder2.AddAttribute(198, "style", "height:1.8rem;");
                __builder2.AddAttribute(199, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 161 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                detalleFactura.cantidad

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(200, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => detalleFactura.cantidad = __value, detalleFactura.cantidad, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(201, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(202, "\r\n                                ");
                __builder2.OpenElement(203, "td");
                __builder2.AddAttribute(204, "class", "col-md-1 text-center ");
                __builder2.AddAttribute(205, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(206, "\r\n                                    ");
                __builder2.OpenElement(207, "h5");
                __builder2.AddMarkupContent(208, "\r\n\r\n                                        ");
                __builder2.OpenElement(209, "span");
                __builder2.AddAttribute(210, "class", "badge badge-light text-center");
                __builder2.AddMarkupContent(211, "\r\n                                            $");
                __builder2.AddContent(212, 
#line 167 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                               detalleFactura.producto.precioUnitario * (detalleFactura.producto.porcentajeRentabilidad / 100 + 1)

#line default
#line hidden
                );
                __builder2.AddMarkupContent(213, "\r\n                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(214, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(215, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(216, "\r\n                                ");
                __builder2.OpenElement(217, "td");
                __builder2.AddAttribute(218, "class", "col-md-1");
                __builder2.AddAttribute(219, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(220, "\r\n                                    ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(221);
                __builder2.AddAttribute(222, "Roles", "Admin");
                __builder2.AddAttribute(223, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(224, "\r\n                                            ");
                    __builder3.OpenElement(225, "input");
                    __builder3.AddAttribute(226, "class", "form-control col-md-12");
                    __builder3.AddAttribute(227, "type", "number");
                    __builder3.AddAttribute(228, "step", "0.01");
                    __builder3.AddAttribute(229, "style", "height:1.8rem;");
                    __builder3.AddAttribute(230, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 175 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                    detalleFactura.bonificacion

#line default
#line hidden
                    , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.AddAttribute(231, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => detalleFactura.bonificacion = __value, detalleFactura.bonificacion, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(232, "\r\n\r\n                                        ");
                }
                ));
                __builder2.AddAttribute(233, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(234, "\r\n                                            ");
                    __builder3.OpenElement(235, "input");
                    __builder3.AddAttribute(236, "class", "form-control col-md-12 disabled");
                    __builder3.AddAttribute(237, "disabled", true);
                    __builder3.AddAttribute(238, "type", "number");
                    __builder3.AddAttribute(239, "step", "0.01");
                    __builder3.AddAttribute(240, "style", "height:1.8rem;");
                    __builder3.AddAttribute(241, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 179 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                      detalleFactura.bonificacion

#line default
#line hidden
                    , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.AddAttribute(242, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => detalleFactura.bonificacion = __value, detalleFactura.bonificacion, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(243, "\r\n\r\n                                        ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(244, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(245, "\r\n                                ");
                __builder2.OpenElement(246, "td");
                __builder2.AddAttribute(247, "class", "col-md-1 text-center");
                __builder2.AddAttribute(248, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(249, "\r\n                                    ");
                __builder2.OpenElement(250, "h5");
                __builder2.AddMarkupContent(251, "\r\n                                        ");
                __builder2.OpenElement(252, "span");
                __builder2.AddAttribute(253, "class", "badge badge-light text-center");
                __builder2.AddMarkupContent(254, "\r\n                                            $");
                __builder2.AddContent(255, 
#line 187 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                               ((detalleFactura.producto.precioUnitario * (detalleFactura.producto.porcentajeRentabilidad / 100 + 1)) - detalleFactura.bonificacion) * detalleFactura.cantidad

#line default
#line hidden
                );
                __builder2.AddMarkupContent(256, "\r\n                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(257, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(258, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(259, "\r\n                                ");
                __builder2.OpenElement(260, "td");
                __builder2.AddAttribute(261, "class", "col-md-1 d-flex justify-content-center");
                __builder2.AddAttribute(262, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(263, "\r\n                                    ");
                __builder2.OpenElement(264, "button");
                __builder2.AddAttribute(265, "class", "btn text-danger  border border-solid rounded");
                __builder2.AddAttribute(266, "title", "Eliminar");
                __builder2.AddAttribute(267, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 192 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                            (() => compra.detalles.Remove(detalleFactura))

#line default
#line hidden
                ));
                __builder2.AddAttribute(268, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 192 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                                                           async (KeyboardEventArgs e) => { Console.WriteLine(e.Key); if(e.Key == "Tab"){ if (compra.detalles.Last() == detalleFactura) { compra.detalles.Add(new DetalleFactura { producto = new Producto()  }); }}  }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(269, "<i class=\"far fa-trash-alt text-danger\"></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(270, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(271, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(272, "\r\n");
#line 196 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                        }

#line default
#line hidden
                __builder2.AddContent(273, "                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(274, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(275, "\r\n                ");
                __builder2.OpenElement(276, "div");
                __builder2.AddAttribute(277, "class", "row col-md-12 mx-0 my-3 px-0");
                __builder2.AddMarkupContent(278, "\r\n                    ");
                __builder2.AddMarkupContent(279, @"<div class=""row 2 col-md-12 mx-0 bg-dark mt-1 rounded text-white mb-4 px-0"">
                        <h5 class=""mt-2 pl-4"">
                            <strong><i class=""far fa-file-alt text-info mr-1""></i>RESUMEN</strong>
                        </h5>
                    </div>

                    ");
                __builder2.OpenElement(280, "div");
                __builder2.AddAttribute(281, "class", "col-md-12 row mx-0 form-inline");
                __builder2.AddMarkupContent(282, "\r\n                        ");
                __builder2.OpenElement(283, "h5");
                __builder2.AddAttribute(284, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(285, "\r\n                            ");
                __builder2.OpenElement(286, "span");
                __builder2.AddAttribute(287, "class", "badge badge-light text-left col-md-6");
                __builder2.AddMarkupContent(288, "\r\n                                ");
                __builder2.OpenElement(289, "strong");
                __builder2.AddContent(290, "SUBTOTAL: $");
                __builder2.AddContent(291, 
#line 210 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                    compra.detalles.Sum(x => x.cantidad * ((x.producto.precioUnitario * (x.producto.porcentajeRentabilidad / 100 + 1)) - x.bonificacion))

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(292, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(293, "\r\n\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(294, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(295, "\r\n\r\n                    ");
                __builder2.OpenElement(296, "div");
                __builder2.AddAttribute(297, "class", "col-md-12 row mx-0 mx-0 ");
                __builder2.AddMarkupContent(298, "\r\n\r\n\r\n                        ");
                __builder2.OpenElement(299, "h5");
                __builder2.AddAttribute(300, "class", "col-md-12 row mx-0 form-inline");
                __builder2.AddMarkupContent(301, "\r\n                            ");
                __builder2.OpenElement(302, "span");
                __builder2.AddAttribute(303, "class", "badge badge-light text-left col-md-6");
                __builder2.AddMarkupContent(304, "\r\n                                ");
                __builder2.AddMarkupContent(305, "<strong class=\"mt-1\"> BONIFICACION: $</strong>\r\n\r\n                                ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(306);
                __builder2.AddAttribute(307, "Roles", "Admin");
                __builder2.AddAttribute(308, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(309, "\r\n                                        ");
                    __builder3.OpenElement(310, "input");
                    __builder3.AddAttribute(311, "type", "number");
                    __builder3.AddAttribute(312, "placeholder", "Descuento");
                    __builder3.AddAttribute(313, "class", "ml-1 col-md-4 form-control");
                    __builder3.AddAttribute(314, "style", "height:1.8rem;");
                    __builder3.AddAttribute(315, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 226 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                             compra.comprobante.bonificacion

#line default
#line hidden
                    , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.AddAttribute(316, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => compra.comprobante.bonificacion = __value, compra.comprobante.bonificacion, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(317, "\r\n\r\n                                    ");
                }
                ));
                __builder2.AddAttribute(318, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(319, "\r\n                                        ");
                    __builder3.OpenElement(320, "input");
                    __builder3.AddAttribute(321, "type", "number");
                    __builder3.AddAttribute(322, "placeholder", "Descuento");
                    __builder3.AddAttribute(323, "class", "ml-1 col-md-4 form-control disabled");
                    __builder3.AddAttribute(324, "disabled", true);
                    __builder3.AddAttribute(325, "style", "height:1.8rem;");
                    __builder3.AddAttribute(326, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 230 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                                               compra.comprobante.bonificacion

#line default
#line hidden
                    , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.AddAttribute(327, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => compra.comprobante.bonificacion = __value, compra.comprobante.bonificacion, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                    __builder3.SetUpdatesAttributeName("value");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(328, "\r\n\r\n                                    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(329, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(330, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(331, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(332, "\r\n\r\n\r\n                    ");
                __builder2.OpenElement(333, "div");
                __builder2.AddAttribute(334, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(335, "\r\n                        ");
                __builder2.OpenElement(336, "h5");
                __builder2.AddAttribute(337, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(338, "\r\n\r\n                            ");
                __builder2.OpenElement(339, "span");
                __builder2.AddAttribute(340, "class", "badge badge-dark text-left col-md-6");
                __builder2.AddMarkupContent(341, "\r\n                                ");
                __builder2.OpenElement(342, "strong");
                __builder2.AddContent(343, "TOTAL COMPRA: $");
                __builder2.AddContent(344, 
#line 245 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         compra.detalles.Sum(x => x.cantidad * ((x.producto.precioUnitario * (x.producto.porcentajeRentabilidad / 100 + 1)) - x.bonificacion)) - compra.comprobante.bonificacion

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(345, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(346, "\r\n\r\n                            ");
                __builder2.OpenElement(347, "span");
                __builder2.AddAttribute(348, "class", "badge badge-dark text-left col-md-6 d-flex justify-content-end");
                __builder2.AddMarkupContent(349, "\r\n                                ");
                __builder2.OpenElement(350, "strong");
                __builder2.AddContent(351, "TOTAL PAGO: $");
                __builder2.AddContent(352, 
#line 249 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                       compra.comprobante.tarjeta + compra.comprobante.efectivo

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(353, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(354, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(355, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(356, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(357, "\r\n\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(358, "\r\n\r\n\r\n\r\n\r\n            ");
                __builder2.OpenElement(359, "div");
                __builder2.AddAttribute(360, "class", "d-flex justify-content-center row col-md-12 mx-0 px-0 mt-2");
                __builder2.AddMarkupContent(361, "\r\n\r\n");
#line 263 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                 if (AccionSobreComprobante == "Crear" || AccionSobreComprobante == "Editar")
                {

#line default
#line hidden
                __builder2.AddContent(362, "                    ");
                __builder2.OpenElement(363, "button");
                __builder2.AddAttribute(364, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 265 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                      GuardarCompra

#line default
#line hidden
                ));
                __builder2.AddAttribute(365, "class", "btn btn-success col-md-12");
                __builder2.AddMarkupContent(366, "<i class=\"fas fa-save mr-1\"></i> Guardar Compra");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(367, "\r\n");
#line 266 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                }
                else
                {


#line default
#line hidden
                __builder2.AddContent(368, "                    ");
                __builder2.OpenElement(369, "button");
                __builder2.AddAttribute(370, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 270 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                      GuardarCompra

#line default
#line hidden
                ));
                __builder2.AddAttribute(371, "class", "btn btn-success col-md-12 ");
                __builder2.AddMarkupContent(372, "<i class=\"fas fa-save mr-1\"></i> Guardar Compra");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(373, "\r\n");
#line 271 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"

                }

#line default
#line hidden
                __builder2.AddContent(374, "            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(375, "\r\n\r\n\r\n\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(376, "\r\n\r\n        ");
                __builder2.OpenElement(377, "div");
                __builder2.AddAttribute(378, "class", "modal p-0 fade");
                __builder2.AddAttribute(379, "id", "modal");
                __builder2.AddAttribute(380, "data-backdrop", "static");
                __builder2.AddAttribute(381, "tabindex", "-1");
                __builder2.AddAttribute(382, "role", "dialog");
                __builder2.AddMarkupContent(383, "\r\n            ");
                __builder2.OpenElement(384, "div");
                __builder2.AddAttribute(385, "class", "modal-dialog moda-lg rounded border border-solid");
                __builder2.AddAttribute(386, "role", "document");
                __builder2.AddMarkupContent(387, "\r\n                ");
                __builder2.OpenElement(388, "div");
                __builder2.AddAttribute(389, "class", "modal-content");
                __builder2.AddMarkupContent(390, "\r\n                    ");
                __builder2.OpenElement(391, "div");
                __builder2.AddAttribute(392, "class", "modal-header bg-dark text-white");
                __builder2.AddMarkupContent(393, "\r\n                        ");
                __builder2.OpenElement(394, "h5");
                __builder2.AddAttribute(395, "class", "modal-title");
                __builder2.AddContent(396, 
#line 284 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                  (AccionModal == "producto") ? "PRODUCTOS": "ProveedorS"

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(397, "\r\n                        ");
                __builder2.OpenElement(398, "button");
                __builder2.AddAttribute(399, "type", "button");
                __builder2.AddAttribute(400, "class", "close");
                __builder2.AddAttribute(401, "data-dimdiss", "modal");
                __builder2.AddAttribute(402, "aria-label", "Close");
                __builder2.AddAttribute(403, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 285 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                async () => {AccionModal=""; await ModalToggle(); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(404, "\r\n                            ");
                __builder2.AddMarkupContent(405, "<span class=\"text-danger\" aria-hidden=\"true\">&times;</span>\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(406, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(407, "\r\n                    ");
                __builder2.OpenElement(408, "div");
                __builder2.AddAttribute(409, "class", "modal-body p-2 m-1");
                __builder2.AddAttribute(410, "data-spy", "scroll");
                __builder2.AddMarkupContent(411, "\r\n");
#line 290 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                         if (AccionModal == "producto")
                        {

#line default
#line hidden
                __builder2.AddContent(412, "                            ");
                __builder2.OpenElement(413, "div");
                __builder2.AddAttribute(414, "class", "input-group mb-3");
                __builder2.AddMarkupContent(415, "\r\n                                ");
                __builder2.OpenElement(416, "div");
                __builder2.AddAttribute(417, "class", "input-group-prepend");
                __builder2.AddMarkupContent(418, "\r\n                                    ");
                __builder2.OpenElement(419, "button");
                __builder2.AddAttribute(420, "type", "button");
                __builder2.AddAttribute(421, "class", "btn btn-outline-secondary");
                __builder2.AddContent(422, 
#line 294 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                              criterioBusqueda == String.Empty ? "Nombre" : criterioBusqueda

#line default
#line hidden
                );
                __builder2.AddContent(423, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(424, "\r\n                                    ");
                __builder2.AddMarkupContent(425, @"<button type=""button"" class=""btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"" data-toggle=""dropdown"" aria-haspopup=""true"" aria-expanded=""false"">
                                        <span class=""sr-only"">Toggle Dropdown</span>
                                    </button>
                                    ");
                __builder2.OpenElement(426, "div");
                __builder2.AddAttribute(427, "class", "dropdown-menu");
                __builder2.AddMarkupContent(428, "\r\n                                        ");
                __builder2.OpenElement(429, "a");
                __builder2.AddAttribute(430, "class", "dropdown-item");
                __builder2.AddAttribute(431, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 299 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Codigo"

#line default
#line hidden
                ));
                __builder2.AddContent(432, "Codigo");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(433, "\r\n                                        ");
                __builder2.OpenElement(434, "a");
                __builder2.AddAttribute(435, "class", "dropdown-item");
                __builder2.AddAttribute(436, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 300 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Nombre"

#line default
#line hidden
                ));
                __builder2.AddContent(437, "Nombre");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(438, "\r\n                                        ");
                __builder2.OpenElement(439, "a");
                __builder2.AddAttribute(440, "class", "dropdown-item");
                __builder2.AddAttribute(441, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 301 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Marca"

#line default
#line hidden
                ));
                __builder2.AddContent(442, "Marca");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(443, "\r\n                                        ");
                __builder2.OpenElement(444, "a");
                __builder2.AddAttribute(445, "class", "dropdown-item");
                __builder2.AddAttribute(446, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 302 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Talle"

#line default
#line hidden
                ));
                __builder2.AddContent(447, "Talle");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(448, "\r\n                                        ");
                __builder2.OpenElement(449, "a");
                __builder2.AddAttribute(450, "class", "dropdown-item");
                __builder2.AddAttribute(451, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 303 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Color"

#line default
#line hidden
                ));
                __builder2.AddContent(452, "Color");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(453, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(454, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(455, "\r\n                                ");
                __builder2.OpenElement(456, "input");
                __builder2.AddAttribute(457, "type", "text");
                __builder2.AddAttribute(458, "class", "form-control");
                __builder2.AddAttribute(459, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 306 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                       (KeyboardEventArgs e) => { FiltrarProducto(e); }

#line default
#line hidden
                ));
                __builder2.AddAttribute(460, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 306 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                      cadenafiltroBusqueda

#line default
#line hidden
                ));
                __builder2.AddAttribute(461, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => cadenafiltroBusqueda = __value, cadenafiltroBusqueda));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(462, "\r\n\r\n                                ");
                __builder2.AddMarkupContent(463, "<div>\r\n\r\n                                </div>\r\n\r\n                                ");
                __builder2.OpenElement(464, "table");
                __builder2.AddAttribute(465, "class", "table table-striped mt-3 table-sm");
                __builder2.AddMarkupContent(466, "\r\n                                    ");
                __builder2.AddMarkupContent(467, @"<thead class=""bg-dark text-white"">

                                        <tr>
                                            <th>CÃ³digo</th>
                                            <th>Nombre</th>
                                            <th>Marca</th>
                                            <th>Talle</th>
                                            <th>Color</th>
                                            <th>Acciones</th>

                                        </tr>
                                    </thead>
                                    ");
                __builder2.OpenElement(468, "tbody");
                __builder2.AddMarkupContent(469, "\r\n");
#line 326 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                         if (productos.Count > 0)
                                        {
                                            

#line default
#line hidden
#line 328 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                             foreach (Producto producto in productosBuscados)
                                            {

#line default
#line hidden
                __builder2.AddContent(470, "                                                ");
                __builder2.OpenElement(471, "tr");
                __builder2.AddMarkupContent(472, "\r\n                                                    ");
                __builder2.OpenElement(473, "td");
                __builder2.AddContent(474, 
#line 331 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         producto.ProductoId

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(475, "\r\n                                                    ");
                __builder2.OpenElement(476, "td");
                __builder2.AddContent(477, 
#line 332 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         producto.nombre

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(478, "\r\n                                                    ");
                __builder2.OpenElement(479, "td");
                __builder2.AddContent(480, 
#line 333 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         producto.marca

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(481, "\r\n                                                    ");
                __builder2.OpenElement(482, "td");
                __builder2.AddContent(483, 
#line 334 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         producto.talle

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(484, "\r\n                                                    ");
                __builder2.OpenElement(485, "td");
                __builder2.AddContent(486, 
#line 335 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         producto.color

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(487, "\r\n\r\n                                                    ");
                __builder2.OpenElement(488, "td");
                __builder2.OpenElement(489, "button");
                __builder2.AddAttribute(490, "class", "btn");
                __builder2.AddAttribute(491, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 337 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                        async () => { detalleActual.producto = producto; AccionModal = ""; await ModalToggle(); cadenaBusqueda = Convert.ToString(producto.ProductoId); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(492, "<i class=\"far fa-eye text-primary\"></i>");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(493, "\r\n                                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(494, "\r\n");
#line 339 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                            }

#line default
#line hidden
#line 339 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                             

                                        }

#line default
#line hidden
                __builder2.AddMarkupContent(495, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(496, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(497, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(498, "\r\n");
#line 346 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                        }
                        else if (AccionModal == "proveedor")
                        {

#line default
#line hidden
                __builder2.AddContent(499, "                            ");
                __builder2.OpenElement(500, "div");
                __builder2.AddAttribute(501, "class", "input-group mb-3");
                __builder2.AddMarkupContent(502, "\r\n                                ");
                __builder2.OpenElement(503, "div");
                __builder2.AddAttribute(504, "class", "input-group-prepend");
                __builder2.AddMarkupContent(505, "\r\n                                    ");
                __builder2.OpenElement(506, "button");
                __builder2.AddAttribute(507, "type", "button");
                __builder2.AddAttribute(508, "class", "btn btn-outline-secondary");
                __builder2.AddContent(509, 
#line 351 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                              criterioBusqueda == String.Empty ? "Razon Social" : criterioBusqueda

#line default
#line hidden
                );
                __builder2.AddContent(510, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(511, "\r\n                                    ");
                __builder2.AddMarkupContent(512, @"<button type=""button"" class=""btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"" data-toggle=""dropdown"" aria-haspopup=""true"" aria-expanded=""false"">
                                        <span class=""sr-only"">Toggle Dropdown</span>
                                    </button>
                                    ");
                __builder2.OpenElement(513, "div");
                __builder2.AddAttribute(514, "class", "dropdown-menu");
                __builder2.AddMarkupContent(515, "\r\n\r\n                                        ");
                __builder2.OpenElement(516, "a");
                __builder2.AddAttribute(517, "class", "dropdown-item");
                __builder2.AddAttribute(518, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 357 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Razon Social"

#line default
#line hidden
                ));
                __builder2.AddContent(519, "Razon Social");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(520, "\r\n                                        ");
                __builder2.OpenElement(521, "a");
                __builder2.AddAttribute(522, "class", "dropdown-item");
                __builder2.AddAttribute(523, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 358 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                             () => criterioBusqueda = "Codigo"

#line default
#line hidden
                ));
                __builder2.AddContent(524, "Codigo");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(525, "\r\n\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(526, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(527, "\r\n                                ");
                __builder2.OpenElement(528, "input");
                __builder2.AddAttribute(529, "type", "text");
                __builder2.AddAttribute(530, "class", "form-control");
                __builder2.AddAttribute(531, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 362 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                                                                                       (KeyboardEventArgs e) => { FiltrarProveedor(e); }

#line default
#line hidden
                ));
                __builder2.AddAttribute(532, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 362 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                      cadenafiltroBusqueda

#line default
#line hidden
                ));
                __builder2.AddAttribute(533, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => cadenafiltroBusqueda = __value, cadenafiltroBusqueda));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(534, "\r\n\r\n                                ");
                __builder2.AddMarkupContent(535, "<div>\r\n\r\n                                </div>\r\n\r\n                                ");
                __builder2.OpenElement(536, "table");
                __builder2.AddAttribute(537, "class", "table table-striped mt-3 table-sm");
                __builder2.AddMarkupContent(538, "\r\n                                    ");
                __builder2.AddMarkupContent(539, @"<thead class=""bg-dark text-white"">

                                        <tr>
                                            <th>CÃ³digo</th>
                                            <th>RazÃ³n Social</th>
                                            <th>Accciones</th>
                                        </tr>
                                    </thead>
                                    ");
                __builder2.OpenElement(540, "tbody");
                __builder2.AddMarkupContent(541, "\r\n");
#line 378 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                         if (proveedores.Count > 0)
                                        {
                                            

#line default
#line hidden
#line 380 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                             foreach (Proveedor proveedor in ProveedorsBuscados)
                                            {

#line default
#line hidden
                __builder2.AddContent(542, "                                                ");
                __builder2.OpenElement(543, "tr");
                __builder2.AddMarkupContent(544, "\r\n                                                    ");
                __builder2.OpenElement(545, "td");
                __builder2.AddContent(546, 
#line 383 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         proveedor.PersonaJuridicaId

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(547, "\r\n                                                    ");
                __builder2.OpenElement(548, "td");
                __builder2.AddContent(549, 
#line 384 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                         proveedor.razonSocial

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(550, "\r\n                                                    ");
                __builder2.OpenElement(551, "td");
                __builder2.OpenElement(552, "button");
                __builder2.AddAttribute(553, "class", "btn");
                __builder2.AddAttribute(554, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 385 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                                                                        async () => {busquedaProveedor = proveedor.PersonaJuridicaId; compra.comprobante.personaJuridica = proveedor; AccionModal = ""; await ModalToggle(); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(555, "<i class=\"far fa-eye text-primary\"></i>");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(556, "\r\n                                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(557, "\r\n");
#line 387 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                            }

#line default
#line hidden
#line 387 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                                             

                                        }

#line default
#line hidden
                __builder2.AddMarkupContent(558, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(559, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(560, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(561, "\r\n");
#line 394 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
                        }

#line default
#line hidden
                __builder2.AddContent(562, "                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(563, "\r\n\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(564, "\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(565, "\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(566, "\r\n\r\n\r\n    ");
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#line 405 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
       
    public bool valido { get; set; } = true;
    public string cadenaBusqueda { get; set; }
    public string cadenafiltroBusqueda { get; set; } = String.Empty;
    public string criterioBusqueda { get; set; } = "Codigo";
    public string AccionSobreComprobante { get; set; } = "Detalles";
    public string AccionModal { get; set; } = "";
    public int busquedaProveedor { get; set; }
    public bool ExisteCajaDiariaBandera { get; set; } = true;

    public List<Producto> productos { get; set; } = new List<Producto>();
    public List<Producto> productosBuscados { get; set; } = new List<Producto>();


    public Proveedor proveedor { get; set; } = new Proveedor();
    public List<Proveedor> proveedores { get; set; } = new List<Proveedor>();
    public List<Proveedor> ProveedorsBuscados { get; set; } = new List<Proveedor>();

    public FacturaDto compra { get; set; } = new FacturaDto
    {
        comprobante = new Comprobante { personaJuridica = new Proveedor() },
        detalles = new List<DetalleFactura>()
    };

    public DetalleFactura detalleActual { get; set; } = new DetalleFactura();

    protected override async Task OnInitializedAsync()
    {

      
        await ExisteCajaDiaria();

        await ListarProductos();
        await ListarProveedores();
    }
    protected async Task ExisteCajaDiaria()
    {
        ExisteCajaDiariaBandera = await http.PostJsonAsync<bool>($"/api/Caja/ExisteCajaDia", VariablesGlobales.sucursal);

    }
    protected async Task ListarProveedores()
    {
        proveedores = await http.GetJsonAsync<List<Proveedor>>("/api/Proveedor/Listar");
        proveedores = proveedores.Where(x => x.fechaBaja == null).ToList();
        ProveedorsBuscados = proveedores;
    }
    protected async Task ListarProductos()
    {
        productos = await http.GetJsonAsync<List<Producto>>("/api/Producto/Listar");
        productos = productos.Where(x => x.fechaBaja == null).ToList();
        productosBuscados = productos;
    }

    protected async Task GuardarCompra()
    {
        bool bandera = false;

        foreach (DetalleFactura detalle in compra.detalles)
        {
            

#line default
#line hidden
#line 464 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
             if (detalle.cantidad == 0 || detalle.producto.ProductoId == 0)
            {
                bandera = true;
            }

#line default
#line hidden
#line 467 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Compras\NuevaCompra.razor"
             
        }
        compra.comprobante.importe = compra.detalles.Sum(x => x.cantidad * ((x.producto.precioUnitario * (x.producto.porcentajeRentabilidad / 100 + 1)) - x.bonificacion)) - compra.comprobante.bonificacion;

        if (compra.comprobante.personaJuridica == null || compra.comprobante.personaJuridica.PersonaJuridicaId == 0)
        {
            await Alerta("top-end", "error", "Tienes que seleccionar un proveedor");

        }
        else if (compra.detalles.Count == 0)
        {
            await Alerta("top-end", "error", "Tienes que cargar al menos un artÃ­culo");

        }
        else if (bandera)
        {
            await Alerta("top-end", "error", "No pueden haber renglones sin productos o sin cantidad");

        }

        else
        {
            try
            {
                var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
                compra.comprobante.UserName = authState.User.Identity.Name;

                compra.comprobante.sucursal = VariablesGlobales.sucursal;
                await http.PostJsonAsync("/api/Comprobante/CrearCompra", compra);
                await Alerta("top-end", "success", "Se creÃ³ la compra con Ã©xito");
                compra = new FacturaDto
                {
                    comprobante = new Comprobante { personaJuridica = new Cliente() },
                    detalles = new List<DetalleFactura>()
                };

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                await Alerta("top-end", "error", "Ocurrio un error");
            }
        }
    }
    protected async Task buscarProducto(DetalleFactura detalle)
    {
        Console.WriteLine("buscar productos");
        Console.WriteLine(detalle.cadenaBusquedaProducto);

        try
        {

            detalle.producto = productos.Where(x => x.ProductoId == Convert.ToInt32(detalle.cadenaBusquedaProducto)).First();
        }
        catch (Exception)
        {
            await Alerta("top-end", "error", "Producto Inexistente");
        }

    }

    protected async Task buscarProveedor()
    {
        try
        {
            compra.comprobante.personaJuridica = proveedores.Where(x => x.PersonaJuridicaId == busquedaProveedor).First();

        }
        catch (Exception)
        {

            await Alerta("top-end", "error", "Proveedor Inexistente");
        }


    }


    protected void ChangePrecio(DetalleFactura detalle)
    {

        detalle.subtotal = (detalle.producto.precioUnitario * (detalle.producto.porcentajeRentabilidad / 100 + 1)) - detalle.bonificacion;
    }
    protected async Task CrearComprobante()
    {
        AccionSobreComprobante = "Crear";
        compra = new FacturaDto();

        valido = false;
        await HabilitarFormulario();

    }


    protected void FiltrarProducto(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            if (cadenafiltroBusqueda != "" && cadenafiltroBusqueda != string.Empty)
            {
                try
                {
                    if (criterioBusqueda == "Codigo")
                    {
                        productosBuscados = productos.Where(x => x.ProductoId.ToString().ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }
                    if (criterioBusqueda == "Nombre")
                    {
                        productosBuscados = productos.Where(x => x.nombre.ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }
                    if (criterioBusqueda == "Marca")
                    {
                        productosBuscados = productos.Where(x => x.marca.ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }
                    if (criterioBusqueda == "Proveedor")
                    {
                        productosBuscados = productos.Where(x => x.proveedor.razonSocial.ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }
                    if (criterioBusqueda == "Talle")
                    {
                        productosBuscados = productos.Where(x => x.talle.Contains(cadenafiltroBusqueda)).ToList();
                    }
                    if (criterioBusqueda == "Color")
                    {
                        productosBuscados = productos.Where(x => x.color.Contains(cadenafiltroBusqueda)).ToList();
                    }
                }
                catch (Exception)
                {


                }

            }
            else { productosBuscados = productos; }
        }
    }
    protected void FiltrarProveedor(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            if (cadenafiltroBusqueda != "" && cadenafiltroBusqueda != string.Empty)
            {
                if (criterioBusqueda == "Razon Social")
                {
                    ProveedorsBuscados = proveedores.Where(x => x.razonSocial.ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                }

                if (criterioBusqueda == "Codigo")
                {
                    ProveedorsBuscados = proveedores.Where(x => x.ProveedorId.Contains(cadenafiltroBusqueda)).ToList();
                }
            }
            else { ProveedorsBuscados = proveedores; }
        }
    }

    public async Task HabilitarFormulario()
    {
        await js.InvokeAsync<object>("EnabledFieldFormulario");
    }
    public async Task DeshabilitarFormulario()
    {
        await js.InvokeAsync<object>("DisabledFieldFormulario");
    }

    public async Task Alerta(string posicion = "top-end", string icono = "success", string mensaje = "Se creÃ³ el comprobante con Ã©xito")
    {
        await js.InvokeAsync<object>("alerta", posicion, icono, mensaje);
    }

    public async Task ModalToggle()
    {
        await js.InvokeAsync<object>("ModalToggle");
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime js { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
#pragma warning restore 1591
