#pragma checksum "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "38c5142f5309b2dac25197d9a7f991c6371c2c55"
// <auto-generated/>
#pragma warning disable 1591
namespace LaymarClientSide.Client.Pages.Ventas
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client;

#line default
#line hidden
#line 7 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Shared;

#line default
#line hidden
#line 9 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Helpers;

#line default
#line hidden
#line 10 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Shared;

#line default
#line hidden
#line 11 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 12 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml;

#line default
#line hidden
#line 13 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml.Style;

#line default
#line hidden
#line 14 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Drawing;

#line default
#line hidden
#line 1 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
using LaymarClientSide.Shared.Entidades;

#line default
#line hidden
#line 4 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
using LaymarClientSide.Shared.Dtos;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 3 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
           [Authorize(Roles = "Ventas, Admin")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.RouteAttribute("/Ventas")]
    public partial class Ventas : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(0);
            __builder.AddAttribute(1, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(2, "\r\n    ");
                __builder2.AddMarkupContent(3, "<h2 class=\"mt-2\">\r\n        <strong>\r\n            <span class=\"badge badge-light\">\r\n                <strong><i class=\"fas fa-file-invoice-dollar mr-2 text-info\"></i>VENTAS</strong>\r\n            </span>\r\n        </strong>\r\n    </h2>\r\n    ");
                __builder2.OpenElement(4, "div");
                __builder2.AddAttribute(5, "class", "botonera row col-md-12 mx-0 border bg-light border-solid rounded pt-2");
                __builder2.AddMarkupContent(6, "\r\n\r\n\r\n\r\n        ");
                __builder2.OpenElement(7, "div");
                __builder2.AddAttribute(8, "class", "input-group mb-3 col-md-3");
                __builder2.AddMarkupContent(9, "\r\n            ");
                __builder2.OpenElement(10, "div");
                __builder2.AddAttribute(11, "class", "input-group-prepend input-group-sm");
                __builder2.AddAttribute(12, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 25 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                        async () =>  await BuscarVenta(cadenaBusqueda)

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(13, "\r\n                ");
                __builder2.AddMarkupContent(14, "<span class=\"input-group-text\" id=\"basic-addon1\">CÃ³digo</span>\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(15, "\r\n            ");
                __builder2.OpenElement(16, "input");
                __builder2.AddAttribute(17, "type", "text");
                __builder2.AddAttribute(18, "class", "form-control");
                __builder2.AddAttribute(19, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 28 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                             async (KeyboardEventArgs e) => { if (e.Key == "Enter") { await BuscarVenta(cadenaBusqueda); } }

#line default
#line hidden
                ));
                __builder2.AddAttribute(20, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 28 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                  cadenaBusqueda

#line default
#line hidden
                ));
                __builder2.AddAttribute(21, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => cadenaBusqueda = __value, cadenaBusqueda));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(22, "\r\n\r\n\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(23, "\r\n        ");
                __builder2.OpenElement(24, "button");
                __builder2.AddAttribute(25, "class", "btn text-primary  mb-3 btn-sm border mr-2 border-solid rounded");
                __builder2.AddAttribute(26, "title", "Buscar");
                __builder2.AddAttribute(27, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 33 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                (async () => { ventasBuscadas = ventas; await ModalToggle(); })

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(28, "<i class=\"fas fa-search m-0 p-0\"></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(29, " \r\n\r\n");
#line 35 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
         if (ventas.Count > 0)
        {


#line default
#line hidden
                __builder2.AddContent(30, "            ");
                __builder2.OpenElement(31, "button");
                __builder2.AddAttribute(32, "class", "btn text-danger  mb-3 btn-sm border border-solid rounded");
                __builder2.AddAttribute(33, "title", "Anular");
                __builder2.AddAttribute(34, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 38 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                async () => { await ModalConfirmToggle(); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(35, "<i class=\"fas fa-ban\"></i>");
                __builder2.CloseElement();
                __builder2.AddContent(36, " ");
#line 38 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                                                                                                  
        }

#line default
#line hidden
                __builder2.AddMarkupContent(37, "\r\n\r\n    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(38, "\r\n\r\n\r\n    ");
                __builder2.OpenElement(39, "div");
                __builder2.AddAttribute(40, "class", "row col-md-12 mx-0 mt-3");
                __builder2.AddMarkupContent(41, "\r\n\r\n        ");
                __builder2.OpenElement(42, "fieldset");
                __builder2.AddAttribute(43, "id", "FieldSetFormulario");
                __builder2.AddAttribute(44, "class", "border" + " border-solid" + " rounded" + " p-0" + " m-0" + " col-md-12" + " row" + " " + (
#line 47 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                     venta.comprobante.fechaBaja != null ? "border-danger":""

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(45, "\r\n");
#line 49 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
             if (ventas.Count > 0)
            {

#line default
#line hidden
                __builder2.AddContent(46, "                ");
                __builder2.OpenElement(47, "div");
                __builder2.AddAttribute(48, "class", "bg-light");
                __builder2.AddMarkupContent(49, "\r\n                    ");
                __builder2.AddMarkupContent(50, "<div class=\"row 2 mx-0 mb-2 border-top border-solid bg-dark text-white px-4 pt-3\"><h3><strong>DATOS DE LA VENTA</strong></h3></div>\r\n\r\n                    ");
                __builder2.OpenElement(51, "div");
                __builder2.AddAttribute(52, "class", "justify-content-end d-flex row col-md-12 mt-4 mx-0 form-inline");
                __builder2.AddMarkupContent(53, "\r\n                        ");
                __builder2.OpenElement(54, "h5");
                __builder2.AddAttribute(55, "class", "col-md-9");
                __builder2.AddMarkupContent(56, "\r\n\r\n                            ");
                __builder2.AddMarkupContent(57, "<span class=\"badge badge-light pl-4\">\r\n                                <strong>CLIENTE:</strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(58, "span");
                __builder2.AddAttribute(59, "class", "badge badge-info text-left");
                __builder2.AddMarkupContent(60, "\r\n                                ");
                __builder2.AddContent(61, 
#line 61 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                 venta.comprobante.personaJuridica.razonSocial

#line default
#line hidden
                );
                __builder2.AddMarkupContent(62, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(63, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(64, "\r\n\r\n                        ");
                __builder2.OpenElement(65, "h5");
                __builder2.AddAttribute(66, "class", "col-md-3");
                __builder2.AddMarkupContent(67, "\r\n                            ");
                __builder2.AddMarkupContent(68, "<span class=\"badge badge-light\">\r\n                                <strong>FECHA: </strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(69, "strong");
                __builder2.AddMarkupContent(70, "\r\n                                ");
                __builder2.OpenElement(71, "span");
                __builder2.AddAttribute(72, "class", "badge badge-light");
                __builder2.AddMarkupContent(73, "\r\n                                    ");
                __builder2.AddContent(74, 
#line 71 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                     venta.comprobante.fechaAlta.ToString("dd/MM/yyyy")

#line default
#line hidden
                );
                __builder2.AddMarkupContent(75, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(76, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(77, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(78, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(79, "\r\n\r\n                    ");
                __builder2.OpenElement(80, "div");
                __builder2.AddAttribute(81, "class", "row col-md-12 form-inline mx-0 ");
                __builder2.AddMarkupContent(82, "\r\n\r\n\r\n                        ");
                __builder2.AddMarkupContent(83, "<h5 class=\" col-md-9 \">\r\n                        </h5>\r\n\r\n                        ");
                __builder2.OpenElement(84, "h5");
                __builder2.AddAttribute(85, "class", "col-md-3 ");
                __builder2.AddMarkupContent(86, "\r\n\r\n                            ");
                __builder2.AddMarkupContent(87, "<span class=\"badge badge-light \">\r\n                                <strong>SUCURSAL:</strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(88, "strong");
                __builder2.AddMarkupContent(89, "\r\n                                ");
                __builder2.OpenElement(90, "span");
                __builder2.AddAttribute(91, "class", "badge badge-info ");
                __builder2.AddMarkupContent(92, "\r\n                                    ");
                __builder2.AddContent(93, 
#line 90 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                     venta.comprobante.sucursal.nombreSucursal

#line default
#line hidden
                );
                __builder2.AddMarkupContent(94, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(95, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(96, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(97, "\r\n\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(98, "\r\n\r\n                    ");
                __builder2.OpenElement(99, "div");
                __builder2.AddAttribute(100, "class", "justify-content-end d-flex row col-md-12 mx-0");
                __builder2.AddMarkupContent(101, "\r\n\r\n                        ");
                __builder2.OpenElement(102, "h5");
                __builder2.AddAttribute(103, "class", "mt-2 col-md-3");
                __builder2.AddMarkupContent(104, "\r\n                            ");
                __builder2.AddMarkupContent(105, "<span class=\"badge badge-light\">\r\n                                <strong>VENDEDOR: </strong>\r\n                            </span>\r\n                            ");
                __builder2.OpenElement(106, "strong");
                __builder2.AddMarkupContent(107, "\r\n                                ");
                __builder2.OpenElement(108, "span");
                __builder2.AddAttribute(109, "class", "badge badge-info");
                __builder2.AddMarkupContent(110, "\r\n                                    ");
                __builder2.AddContent(111, 
#line 106 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                     venta.comprobante.UserName

#line default
#line hidden
                );
                __builder2.AddMarkupContent(112, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(113, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(114, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(115, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(116, "\r\n\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(117, "\r\n");
                __builder2.AddContent(118, "                ");
                __builder2.OpenElement(119, "table");
                __builder2.AddAttribute(120, "class", "row col-md-12 mx-0 px-0 table px-1  table-sm mt-2 table-responsive-sm table-bordered table-hover");
                __builder2.AddMarkupContent(121, "\r\n                    ");
                __builder2.AddMarkupContent(122, @"<thead class=""bg-light col-md-12 mx-0 px-0 "">
                        <tr class=""col-md-12 row mx-0 px-0 text-center d-flex justify-content-center bg-info text-white "" style=""height:2.5rem"">
                            <th class=""col-md-1"" style=""height:2.5rem"">CODIGO</th>
                            <th class=""col-md-7"" style=""height:2.5rem"">DESCRIPCION TALLE COLOR  MARCA</th>

                            <th class=""col-md-1"" style=""height:2.5rem"">CANTIDAD</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">P/UNIDAD</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">DESC.</th>
                            <th class=""col-md-1"" style=""height:2.5rem"">IMPORTE</th>

                        </tr>
                    </thead>
                    ");
                __builder2.OpenElement(123, "tbody");
                __builder2.AddAttribute(124, "class", "col-md-12 mx-0 px-0");
                __builder2.AddMarkupContent(125, "\r\n");
#line 130 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                         foreach (DetalleFactura detalleFactura in venta.detalles)
                        {

#line default
#line hidden
                __builder2.AddContent(126, "                            ");
                __builder2.OpenElement(127, "tr");
                __builder2.AddAttribute(128, "class", "col-md-12 row mx-0 px-0 ");
                __builder2.AddAttribute(129, "style", "height:2.5rem");
                __builder2.AddMarkupContent(130, "\r\n                                ");
                __builder2.OpenElement(131, "td");
                __builder2.AddAttribute(132, "class", "col-md-1 form-inline text-center");
                __builder2.AddAttribute(133, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(134, "\r\n                                    ");
                __builder2.OpenElement(135, "span");
                __builder2.AddAttribute(136, "class", "badge badge-light text-center");
                __builder2.AddContent(137, 
#line 134 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                 detalleFactura.producto.ProductoId

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(138, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(139, "\r\n\r\n                                ");
                __builder2.OpenElement(140, "td");
                __builder2.AddAttribute(141, "class", "col-md-7 text-center ");
                __builder2.AddAttribute(142, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(143, "\r\n                                    ");
                __builder2.OpenElement(144, "h5");
                __builder2.AddAttribute(145, "class", "mt-1");
                __builder2.AddMarkupContent(146, "\r\n\r\n                                        ");
                __builder2.OpenElement(147, "span");
                __builder2.AddAttribute(148, "class", "badge badge-light text-center");
                __builder2.AddContent(149, 
#line 140 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                     detalleFactura.producto.nombre

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(150, "\r\n                                        ");
                __builder2.OpenElement(151, "span");
                __builder2.AddAttribute(152, "class", "badge badge-light text-center");
                __builder2.AddContent(153, 
#line 141 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                     detalleFactura.producto.talle

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(154, "\r\n\r\n                                        ");
                __builder2.OpenElement(155, "span");
                __builder2.AddAttribute(156, "class", "badge badge-light text-center");
                __builder2.AddContent(157, " ");
                __builder2.AddContent(158, 
#line 143 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                      detalleFactura.producto.color

#line default
#line hidden
                );
                __builder2.AddContent(159, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(160, "\r\n                                        ");
                __builder2.OpenElement(161, "span");
                __builder2.AddAttribute(162, "class", "badge badge-light text-center");
                __builder2.AddContent(163, " ");
                __builder2.AddContent(164, 
#line 144 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                      detalleFactura.producto.marca

#line default
#line hidden
                );
                __builder2.AddContent(165, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(166, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(167, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(168, "\r\n\r\n\r\n\r\n                                ");
                __builder2.OpenElement(169, "td");
                __builder2.AddAttribute(170, "class", "col-md-1");
                __builder2.AddAttribute(171, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(172, "\r\n                                    ");
                __builder2.OpenElement(173, "span");
                __builder2.AddAttribute(174, "class", "badge badge-light text-center");
                __builder2.AddContent(175, " ");
                __builder2.AddContent(176, 
#line 152 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                  detalleFactura.cantidad

#line default
#line hidden
                );
                __builder2.AddContent(177, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(178, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(179, "\r\n                                ");
                __builder2.OpenElement(180, "td");
                __builder2.AddAttribute(181, "class", "col-md-1 text-center ");
                __builder2.AddAttribute(182, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(183, "\r\n                                    ");
                __builder2.OpenElement(184, "h5");
                __builder2.AddMarkupContent(185, "\r\n\r\n                                        ");
                __builder2.OpenElement(186, "span");
                __builder2.AddAttribute(187, "class", "badge badge-light text-center");
                __builder2.AddMarkupContent(188, "\r\n                                            $");
                __builder2.AddContent(189, 
#line 158 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                               detalleFactura.producto.precioUnitario * (detalleFactura.producto.porcentajeRentabilidad / 100 + 1)

#line default
#line hidden
                );
                __builder2.AddMarkupContent(190, "\r\n                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(191, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(192, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(193, "\r\n                                ");
                __builder2.OpenElement(194, "td");
                __builder2.AddAttribute(195, "class", "col-md-1");
                __builder2.AddAttribute(196, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(197, "\r\n                                    ");
                __builder2.OpenElement(198, "span");
                __builder2.AddAttribute(199, "class", "badge badge-light text-center");
                __builder2.AddContent(200, " ");
                __builder2.AddContent(201, 
#line 164 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                  detalleFactura.bonificacion

#line default
#line hidden
                );
                __builder2.AddContent(202, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(203, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(204, "\r\n                                ");
                __builder2.OpenElement(205, "td");
                __builder2.AddAttribute(206, "class", "col-md-1 text-center");
                __builder2.AddAttribute(207, "style", "height:2.5rem; padding:2px 8px 2px 8px");
                __builder2.AddMarkupContent(208, "\r\n                                    ");
                __builder2.OpenElement(209, "h5");
                __builder2.AddMarkupContent(210, "\r\n                                        ");
                __builder2.OpenElement(211, "span");
                __builder2.AddAttribute(212, "class", "badge badge-light text-center");
                __builder2.AddMarkupContent(213, "\r\n                                            $");
                __builder2.AddContent(214, 
#line 170 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                               ((detalleFactura.producto.precioUnitario * (detalleFactura.producto.porcentajeRentabilidad / 100 + 1)) - detalleFactura.bonificacion) * detalleFactura.cantidad

#line default
#line hidden
                );
                __builder2.AddMarkupContent(215, "\r\n                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(216, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(217, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(218, "\r\n\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(219, "\r\n");
#line 177 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                        }

#line default
#line hidden
                __builder2.AddContent(220, "                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(221, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(222, "\r\n");
                __builder2.AddContent(223, "                ");
                __builder2.OpenElement(224, "div");
                __builder2.AddAttribute(225, "class", "row col-md-12 mx-0 my-3 px-0");
                __builder2.AddMarkupContent(226, "\r\n                    ");
                __builder2.AddMarkupContent(227, @"<div class=""row 2 col-md-12 mx-0 bg-dark mt-1 rounded text-white mb-4 px-0"">
                        <h5 class=""mt-2 pl-4"">
                            <strong><i class=""far fa-file-alt text-info mr-1""></i>RESUMEN</strong>
                        </h5>
                    </div>

                    ");
                __builder2.OpenElement(228, "div");
                __builder2.AddAttribute(229, "class", "col-md-12 row mx-0 form-inline");
                __builder2.AddMarkupContent(230, "\r\n                        ");
                __builder2.OpenElement(231, "h5");
                __builder2.AddAttribute(232, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(233, "\r\n                            ");
                __builder2.OpenElement(234, "span");
                __builder2.AddAttribute(235, "class", "badge badge-light text-left col-md-6");
                __builder2.AddMarkupContent(236, "\r\n                                ");
                __builder2.OpenElement(237, "strong");
                __builder2.AddContent(238, "SUBTOTAL: $");
                __builder2.AddContent(239, 
#line 191 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                    venta.detalles.Sum(x => x.cantidad * ((x.producto.precioUnitario * (x.producto.porcentajeRentabilidad / 100 + 1)) - x.bonificacion))

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(240, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(241, "\r\n\r\n                            ");
                __builder2.OpenElement(242, "span");
                __builder2.AddAttribute(243, "class", "badge badge-light text-left col-md-6 d-flex justify-content-end");
                __builder2.AddMarkupContent(244, "\r\n                                ");
                __builder2.OpenElement(245, "strong");
                __builder2.AddAttribute(246, "class", "mt-1");
                __builder2.AddMarkupContent(247, "\r\n                                    <i class=\"fas fa-money-bill text-success\"></i>EFECTIVO: $ ");
                __builder2.AddContent(248, 
#line 196 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                venta.comprobante.efectivo

#line default
#line hidden
                );
                __builder2.AddMarkupContent(249, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(250, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(251, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(252, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(253, "\r\n\r\n                    ");
                __builder2.OpenElement(254, "div");
                __builder2.AddAttribute(255, "class", "col-md-12 row mx-0 mx-0 ");
                __builder2.AddMarkupContent(256, "\r\n\r\n\r\n                        ");
                __builder2.OpenElement(257, "h5");
                __builder2.AddAttribute(258, "class", "col-md-12 row mx-0 form-inline");
                __builder2.AddMarkupContent(259, "\r\n                            ");
                __builder2.OpenElement(260, "span");
                __builder2.AddAttribute(261, "class", "badge badge-light text-left col-md-6");
                __builder2.AddMarkupContent(262, "\r\n                                ");
                __builder2.OpenElement(263, "strong");
                __builder2.AddAttribute(264, "class", "mt-1");
                __builder2.AddContent(265, " BONIFICACION: $ ");
                __builder2.AddContent(266, 
#line 208 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                        venta.comprobante.bonificacion

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(267, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(268, "\r\n                            ");
                __builder2.OpenElement(269, "span");
                __builder2.AddAttribute(270, "class", "badge badge-light text-left col-md-6 d-flex justify-content-end");
                __builder2.AddMarkupContent(271, "\r\n                                ");
                __builder2.OpenElement(272, "strong");
                __builder2.AddAttribute(273, "class", "mt-1");
                __builder2.AddMarkupContent(274, "\r\n                                    <i class=\"fas fa-credit-card text-info\"></i>\r\n                                    TARJETA: $ ");
                __builder2.AddContent(275, 
#line 214 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.tarjeta

#line default
#line hidden
                );
                __builder2.AddMarkupContent(276, "\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(277, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(278, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(279, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(280, "\r\n\r\n\r\n                    ");
                __builder2.OpenElement(281, "div");
                __builder2.AddAttribute(282, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(283, "\r\n                        ");
                __builder2.OpenElement(284, "h5");
                __builder2.AddAttribute(285, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(286, "\r\n\r\n                            ");
                __builder2.OpenElement(287, "span");
                __builder2.AddAttribute(288, "class", "badge badge-dark text-left col-md-6");
                __builder2.AddMarkupContent(289, "\r\n                                ");
                __builder2.OpenElement(290, "strong");
                __builder2.AddContent(291, "TOTAL VENTA: $");
                __builder2.AddContent(292, 
#line 226 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                        venta.detalles.Sum(x => x.cantidad * ((x.producto.precioUnitario * (x.producto.porcentajeRentabilidad / 100 + 1)) - x.bonificacion)) - venta.comprobante.bonificacion

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(293, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(294, "\r\n\r\n                            ");
                __builder2.OpenElement(295, "span");
                __builder2.AddAttribute(296, "class", "badge badge-dark text-left col-md-6 d-flex justify-content-end");
                __builder2.AddMarkupContent(297, "\r\n                                ");
                __builder2.OpenElement(298, "strong");
                __builder2.AddContent(299, "TOTAL PAGO: $");
                __builder2.AddContent(300, 
#line 230 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                       venta.comprobante.tarjeta + venta.comprobante.efectivo

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(301, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(302, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(303, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(304, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(305, "\r\n");
#line 235 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
            }
            else
            {

#line default
#line hidden
                __builder2.AddContent(306, "                ");
                __builder2.OpenElement(307, "div");
                __builder2.AddAttribute(308, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(309, "\r\n                    ");
                __builder2.OpenElement(310, "h4");
                __builder2.AddMarkupContent(311, "\r\n                        ");
                __builder2.OpenElement(312, "span");
                __builder2.AddAttribute(313, "class", "badge badge-dark text-left d-flex justify-content-lg-start mt-4");
                __builder2.AddMarkupContent(314, "\r\n                            ");
                __builder2.OpenElement(315, "strong");
                __builder2.AddMarkupContent(316, "\r\n                                NO SE ENCONTRARON VENTA EN ESTE PERIODO\r\n                                ");
                __builder2.OpenElement(317, "span");
                __builder2.AddAttribute(318, "class", "col-md-12 row");
                __builder2.AddContent(319, "Desde: ");
                __builder2.AddContent(320, 
#line 243 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                    fechaDesde.ToString("dd/MM/yyyy")

#line default
#line hidden
                );
                __builder2.AddContent(321, " - Hasta: ");
                __builder2.AddContent(322, 
#line 243 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                fechaHasta.ToString("dd/MM/yyyy")

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(323, "\r\n                                ");
                __builder2.OpenElement(324, "span");
                __builder2.AddAttribute(325, "class", "col-md-12 row");
                __builder2.AddContent(326, "Sucursal: ");
                __builder2.AddContent(327, 
#line 244 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                        sucursal != null ? sucursal.nombreSucursal : ""

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(328, "\r\n                                ");
                __builder2.OpenElement(329, "span");
                __builder2.AddAttribute(330, "class", "col-md-12 row");
                __builder2.AddContent(331, "Vendedor: ");
                __builder2.AddContent(332, 
#line 245 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                        user != null ? user.username : ""

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(333, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(334, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(335, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(336, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(337, "\r\n");
#line 251 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
            }

#line default
#line hidden
                __builder2.AddContent(338, "        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(339, "\r\n\r\n    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(340, "\r\n\r\n\r\n\r\n\r\n    ");
                __builder2.OpenElement(341, "div");
                __builder2.AddAttribute(342, "class", "modal p-0 fade");
                __builder2.AddAttribute(343, "id", "modal");
                __builder2.AddAttribute(344, "data-backdrop", "static");
                __builder2.AddAttribute(345, "tabindex", "-1");
                __builder2.AddAttribute(346, "role", "dialog");
                __builder2.AddMarkupContent(347, "\r\n        ");
                __builder2.OpenElement(348, "div");
                __builder2.AddAttribute(349, "class", "modal-dialog modal-xl");
                __builder2.AddAttribute(350, "role", "document");
                __builder2.AddMarkupContent(351, "\r\n            ");
                __builder2.OpenElement(352, "div");
                __builder2.AddAttribute(353, "class", "modal-content");
                __builder2.AddMarkupContent(354, "\r\n                ");
                __builder2.OpenElement(355, "div");
                __builder2.AddAttribute(356, "class", "modal-header");
                __builder2.AddMarkupContent(357, "\r\n                    ");
                __builder2.AddMarkupContent(358, "<h5 class=\"modal-title\">BUSCAR VENTAS</h5>\r\n                    ");
                __builder2.OpenElement(359, "button");
                __builder2.AddAttribute(360, "type", "button");
                __builder2.AddAttribute(361, "class", "close");
                __builder2.AddAttribute(362, "data-dismiss", "modal");
                __builder2.AddAttribute(363, "aria-label", "Close");
                __builder2.AddAttribute(364, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 265 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                          (async () => { await ModalToggle();  })

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(365, "\r\n                        ");
                __builder2.AddMarkupContent(366, "<span aria-hidden=\"true\">&times;</span>\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(367, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(368, "\r\n                ");
                __builder2.OpenElement(369, "div");
                __builder2.AddAttribute(370, "class", "modal-body p-3 m-2");
                __builder2.AddAttribute(371, "data-spy", "scroll");
                __builder2.AddMarkupContent(372, "\r\n                    ");
                __builder2.OpenElement(373, "div");
                __builder2.AddAttribute(374, "class", "col-md-12 row mx-0 px-0");
                __builder2.AddMarkupContent(375, "\r\n                        ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(376);
                __builder2.AddAttribute(377, "Roles", "Admin");
                __builder2.AddAttribute(378, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(379, "\r\n                                ");
                    __builder3.OpenElement(380, "div");
                    __builder3.AddAttribute(381, "class", "input-group col-md-3 mb-3 mx-0 px-0");
                    __builder3.AddMarkupContent(382, "\r\n                                    ");
                    __builder3.AddMarkupContent(383, "<div class=\"input-group-prepend input-group-sm \">\r\n                                        <span class=\"input-group-text \" id=\"basic-addon1\">Desde</span>\r\n                                    </div>\r\n                                    ");
                    __builder3.OpenElement(384, "input");
                    __builder3.AddAttribute(385, "type", "date");
                    __builder3.AddAttribute(386, "class", "form-control");
                    __builder3.AddAttribute(387, "value", 
#line 278 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                    DateTime.Now.AddHours(-3).ToString("yyyy-MM-dd")

#line default
#line hidden
                    );
                    __builder3.AddAttribute(388, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 278 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                                   async (ChangeEventArgs e)=> { fechaDesde = Convert.ToDateTime(e.Value.ToString()); await ListarVentas(); }

#line default
#line hidden
                    ));
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(389, "\r\n                                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(390, "\r\n                                ");
                    __builder3.OpenElement(391, "div");
                    __builder3.AddAttribute(392, "class", "input-group mb-3 col-md-3");
                    __builder3.AddMarkupContent(393, "\r\n                                    ");
                    __builder3.AddMarkupContent(394, "<div class=\"input-group-prepend input-group-sm\">\r\n                                        <span class=\"input-group-text\" id=\"basic-addon1\">Hasta</span>\r\n                                    </div>\r\n                                    ");
                    __builder3.OpenElement(395, "input");
                    __builder3.AddAttribute(396, "type", "date");
                    __builder3.AddAttribute(397, "class", "form-control");
                    __builder3.AddAttribute(398, "value", 
#line 284 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                    DateTime.Now.AddHours(-3).ToString("yyyy-MM-dd")

#line default
#line hidden
                    );
                    __builder3.AddAttribute(399, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 284 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                                   async (ChangeEventArgs e)=> { fechaHasta = Convert.ToDateTime(e.Value.ToString()); await ListarVentas(); }

#line default
#line hidden
                    ));
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(400, "\r\n                                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(401, "\r\n\r\n\r\n                                ");
                    __builder3.OpenElement(402, "div");
                    __builder3.AddAttribute(403, "class", "input-group mb-3 col-md-3");
                    __builder3.AddMarkupContent(404, "\r\n                                    ");
                    __builder3.AddMarkupContent(405, "<div class=\"input-group-prepend input-group-sm\">\r\n                                        <span class=\"input-group-text\" id=\"basic-addon1\">Sucursal</span>\r\n                                    </div>\r\n                                    ");
                    __builder3.OpenElement(406, "select");
                    __builder3.AddAttribute(407, "class", "form-control");
                    __builder3.AddAttribute(408, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 292 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                              async(ChangeEventArgs e)=> { if (e.Value.ToString() == "TODAS") { sucursal = new Sucursal(); } else { sucursal = sucursales.Where(x => x.SucursalId == Convert.ToInt32(e.Value.ToString())).First(); }await ListarVentas();  }

#line default
#line hidden
                    ));
                    __builder3.AddMarkupContent(409, "\r\n\r\n                                        ");
                    __builder3.OpenElement(410, "option");
                    __builder3.AddAttribute(411, "value", "TODAS");
                    __builder3.AddMarkupContent(412, "\r\n                                            TODAS\r\n                                        ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(413, "\r\n");
#line 297 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         foreach (Sucursal _sucursal in sucursales)
                                        {
                                            

#line default
#line hidden
#line 299 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                             if (_sucursal.SucursalId == sucursal.SucursalId)
                                            {

#line default
#line hidden
                    __builder3.AddContent(414, "                                                ");
                    __builder3.OpenElement(415, "option");
                    __builder3.AddAttribute(416, "selected", true);
                    __builder3.AddAttribute(417, "value", 
#line 301 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                         _sucursal.SucursalId

#line default
#line hidden
                    );
                    __builder3.AddContent(418, 
#line 301 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                _sucursal.nombreSucursal

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(419, "\r\n");
#line 302 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"

                                            }
                                            else
                                            {

#line default
#line hidden
                    __builder3.AddContent(420, "                                                ");
                    __builder3.OpenElement(421, "option");
                    __builder3.AddAttribute(422, "value", 
#line 306 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                _sucursal.SucursalId

#line default
#line hidden
                    );
                    __builder3.AddContent(423, 
#line 306 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                       _sucursal.nombreSucursal

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(424, "\r\n");
#line 307 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"

                                            }

#line default
#line hidden
#line 308 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                             
                                        }

#line default
#line hidden
                    __builder3.AddContent(425, "                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(426, "\r\n                                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(427, "\r\n\r\n                                ");
                    __builder3.OpenElement(428, "div");
                    __builder3.AddAttribute(429, "class", "input-group mb-3 col-md-3");
                    __builder3.AddMarkupContent(430, "\r\n                                    ");
                    __builder3.AddMarkupContent(431, "<div class=\"input-group-prepend input-group-sm\">\r\n                                        <span class=\"input-group-text\" id=\"basic-addon1\">Usuario</span>\r\n                                    </div>\r\n                                    ");
                    __builder3.OpenElement(432, "select");
                    __builder3.AddAttribute(433, "class", "form-control");
                    __builder3.AddAttribute(434, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 317 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                              async(ChangeEventArgs e)=> { if (e.Value.ToString() == "TODOS") { user = new UserInfo(); } else { user = users.Where(x => x.id == e.Value.ToString()).First(); }await ListarVentas();  }

#line default
#line hidden
                    ));
                    __builder3.AddMarkupContent(435, "\r\n\r\n                                        ");
                    __builder3.OpenElement(436, "option");
                    __builder3.AddAttribute(437, "value", "TODOS");
                    __builder3.AddMarkupContent(438, "\r\n                                            TODOS\r\n                                        ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(439, "\r\n");
#line 322 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         foreach (UserInfo _user in users)
                                        {
                                            

#line default
#line hidden
#line 324 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                             if (user.id == _user.id)
                                            {

#line default
#line hidden
                    __builder3.AddContent(440, "                                                ");
                    __builder3.OpenElement(441, "option");
                    __builder3.AddAttribute(442, "selected", true);
                    __builder3.AddAttribute(443, "value", 
#line 326 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                         _user.id

#line default
#line hidden
                    );
                    __builder3.AddContent(444, 
#line 326 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                    _user.username

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(445, "\r\n");
#line 327 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                            }
                                            else
                                            {

#line default
#line hidden
                    __builder3.AddContent(446, "                                                ");
                    __builder3.OpenElement(447, "option");
                    __builder3.AddAttribute(448, "value", 
#line 330 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                _user.id

#line default
#line hidden
                    );
                    __builder3.AddContent(449, 
#line 330 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                           _user.username

#line default
#line hidden
                    );
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(450, "\r\n");
#line 331 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"

                                            }

#line default
#line hidden
#line 332 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                             
                                        }

#line default
#line hidden
                    __builder3.AddContent(451, "                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(452, "\r\n                                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(453, "\r\n                            ");
                }
                ));
                __builder2.AddAttribute(454, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((_context2) => (__builder3) => {
                    __builder3.AddMarkupContent(455, "\r\n                                ");
                    __builder3.OpenElement(456, "h5");
                    __builder3.AddAttribute(457, "class", "col-md-12");
                    __builder3.AddMarkupContent(458, "\r\n\r\n                                    ");
                    __builder3.AddMarkupContent(459, "<span class=\"badge badge-light pl-4\">\r\n                                        <strong>DESDE:</strong>\r\n                                    </span>\r\n                                    ");
                    __builder3.OpenElement(460, "span");
                    __builder3.AddAttribute(461, "class", "badge badge-info text-left");
                    __builder3.AddMarkupContent(462, "\r\n                                        ");
                    __builder3.AddContent(463, 
#line 344 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         fechaDesde.ToString("dd/MM/yyyy")

#line default
#line hidden
                    );
                    __builder3.AddMarkupContent(464, "\r\n                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(465, "\r\n\r\n                                    ");
                    __builder3.AddMarkupContent(466, "<span class=\"badge badge-light pl-4\">\r\n                                        <strong>HASTA:</strong>\r\n                                    </span>\r\n                                    ");
                    __builder3.OpenElement(467, "span");
                    __builder3.AddAttribute(468, "class", "badge badge-info text-left");
                    __builder3.AddMarkupContent(469, "\r\n                                        ");
                    __builder3.AddContent(470, 
#line 351 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         fechaDesde.ToString("dd/MM/yyyy")

#line default
#line hidden
                    );
                    __builder3.AddMarkupContent(471, "\r\n                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(472, "\r\n\r\n                                    ");
                    __builder3.AddMarkupContent(473, "<span class=\"badge badge-light pl-4\">\r\n                                        <strong>Sucursal:</strong>\r\n                                    </span>\r\n                                    ");
                    __builder3.OpenElement(474, "span");
                    __builder3.AddAttribute(475, "class", "badge badge-info text-left");
                    __builder3.AddMarkupContent(476, "\r\n                                        ");
                    __builder3.AddContent(477, 
#line 358 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         VariablesGlobales.sucursal.nombreSucursal

#line default
#line hidden
                    );
                    __builder3.AddMarkupContent(478, "\r\n                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(479, "\r\n\r\n                                    ");
                    __builder3.AddMarkupContent(480, "<span class=\"badge badge-light pl-4\">\r\n                                        <strong>Usuario:</strong>\r\n                                    </span>\r\n                                    ");
                    __builder3.OpenElement(481, "span");
                    __builder3.AddAttribute(482, "class", "badge badge-info text-left");
                    __builder3.AddMarkupContent(483, "\r\n                                        ");
                    __builder3.AddContent(484, 
#line 365 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                         _context2.User.Identity.Name

#line default
#line hidden
                    );
                    __builder3.AddMarkupContent(485, "\r\n                                    ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(486, "\r\n                                ");
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(487, "\r\n                            ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(488, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(489, "\r\n                    ");
                __builder2.OpenElement(490, "div");
                __builder2.AddAttribute(491, "class", "input-group mb-3");
                __builder2.AddMarkupContent(492, "\r\n                        ");
                __builder2.OpenElement(493, "div");
                __builder2.AddAttribute(494, "class", "input-group-prepend");
                __builder2.AddMarkupContent(495, "\r\n                            ");
                __builder2.OpenElement(496, "button");
                __builder2.AddAttribute(497, "type", "button");
                __builder2.AddAttribute(498, "class", "btn btn-outline-secondary");
                __builder2.AddContent(499, 
#line 373 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                      criterioBusqueda == String.Empty ? "Nombre" : criterioBusqueda

#line default
#line hidden
                );
                __builder2.AddContent(500, " ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(501, "\r\n                            ");
                __builder2.AddMarkupContent(502, @"<button type=""button"" class=""btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"" data-toggle=""dropdown"" aria-haspopup=""true"" aria-expanded=""false"">
                                <span class=""sr-only"">Toggle Dropdown</span>
                            </button>
                            ");
                __builder2.OpenElement(503, "div");
                __builder2.AddAttribute(504, "class", "dropdown-menu");
                __builder2.AddMarkupContent(505, "\r\n                                ");
                __builder2.OpenElement(506, "a");
                __builder2.AddAttribute(507, "class", "dropdown-item");
                __builder2.AddAttribute(508, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 378 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                     () => criterioBusqueda = "Codigo"

#line default
#line hidden
                ));
                __builder2.AddContent(509, "Codigo");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(510, "\r\n                                ");
                __builder2.OpenElement(511, "a");
                __builder2.AddAttribute(512, "class", "dropdown-item");
                __builder2.AddAttribute(513, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 379 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                     () => criterioBusqueda = "Razon Social"

#line default
#line hidden
                ));
                __builder2.AddContent(514, "Razon Social");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(515, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(516, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(517, "\r\n                        ");
                __builder2.OpenElement(518, "input");
                __builder2.AddAttribute(519, "type", "text");
                __builder2.AddAttribute(520, "class", "form-control");
                __builder2.AddAttribute(521, "onkeypress", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#line 383 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                               (KeyboardEventArgs e)=> {  FiltrarVenta(e); }

#line default
#line hidden
                ));
                __builder2.AddAttribute(522, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 383 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                              cadenafiltroBusqueda

#line default
#line hidden
                ));
                __builder2.AddAttribute(523, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => cadenafiltroBusqueda = __value, cadenafiltroBusqueda));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(524, "\r\n\r\n\r\n                        ");
                __builder2.OpenElement(525, "table");
                __builder2.AddAttribute(526, "class", "table table-striped mt-3 table-sm");
                __builder2.AddMarkupContent(527, "\r\n                            ");
                __builder2.AddMarkupContent(528, @"<thead class=""bg-dark text-white"">

                                <tr>
                                    <th>Fecha</th>
                                    <th>CÃ³digo</th>
                                    <th>Razon Social</th>
                                    <th>Sucursal</th>
                                    <th>Vendedor</th>

                                    <th>Importe</th>
                                    <th>Acciones</th>


                                </tr>
                            </thead>
                            ");
                __builder2.OpenElement(529, "tbody");
                __builder2.AddMarkupContent(530, "\r\n");
#line 403 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                 if (ventas.Count > 0)
                                {
                                    

#line default
#line hidden
#line 405 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                     foreach (FacturaDto venta in ventasBuscadas)
                                    {

#line default
#line hidden
                __builder2.AddContent(531, "                                        ");
                __builder2.OpenElement(532, "tr");
                __builder2.AddMarkupContent(533, "\r\n                                            ");
                __builder2.OpenElement(534, "td");
                __builder2.AddContent(535, 
#line 408 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.fechaAlta

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(536, "\r\n                                            ");
                __builder2.OpenElement(537, "td");
                __builder2.AddContent(538, 
#line 409 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.codigo

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(539, "\r\n                                            ");
                __builder2.OpenElement(540, "td");
                __builder2.AddContent(541, 
#line 410 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.personaJuridica.razonSocial

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(542, "\r\n                                            ");
                __builder2.OpenElement(543, "td");
                __builder2.AddContent(544, 
#line 411 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.sucursal.nombreSucursal

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(545, "\r\n                                            ");
                __builder2.OpenElement(546, "td");
                __builder2.AddContent(547, 
#line 412 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                 venta.comprobante.UserName

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(548, "\r\n\r\n                                            ");
                __builder2.OpenElement(549, "td");
                __builder2.AddContent(550, "$ ");
                __builder2.AddContent(551, 
#line 414 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                   venta.comprobante.importe

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(552, "\r\n\r\n                                            ");
                __builder2.OpenElement(553, "td");
                __builder2.OpenElement(554, "button");
                __builder2.AddAttribute(555, "class", "btn");
                __builder2.AddAttribute(556, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 416 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                async () => { await BuscarVenta(venta.comprobante.codigo); await ModalToggle(); cadenaBusqueda = Convert.ToString(venta.comprobante.codigo); }

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(557, "<i class=\"far fa-eye text-primary\"></i>");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(558, "\r\n                                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(559, "\r\n");
#line 418 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                    }

#line default
#line hidden
#line 418 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                     

                                }

#line default
#line hidden
                __builder2.AddMarkupContent(560, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(561, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(562, "\r\n                        ");
                __builder2.OpenElement(563, "div");
                __builder2.AddAttribute(564, "class", "col-md-12 row bg-dark mx-0 alert");
                __builder2.AddMarkupContent(565, "\r\n                            ");
                __builder2.OpenElement(566, "h6");
                __builder2.AddAttribute(567, "class", "bg-dark text-white col-md-6 pt-2");
                __builder2.OpenElement(568, "strong");
                __builder2.AddContent(569, "TOTAL VENTAS $ ");
                __builder2.AddContent(570, 
#line 425 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                 ventasBuscadas.Sum(x => x.comprobante.importe)

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(571, "\r\n                            ");
                __builder2.OpenElement(572, "div");
                __builder2.AddAttribute(573, "class", "col-md-6 d-flex justify-content-end");
                __builder2.AddMarkupContent(574, "\r\n                                ");
                __builder2.OpenElement(575, "button");
                __builder2.AddAttribute(576, "class", "btn btn-success ml-4");
                __builder2.AddAttribute(577, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 427 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                               DescargarVentasExcel

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(578, "\r\n                                    <i class=\"fas fa-file-excel mr-2\"></i> Descargar\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(579, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(580, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(581, "\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(582, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(583, "\r\n\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(584, "\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(585, "\r\n    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(586, "\r\n\r\n    ");
                __builder2.OpenElement(587, "div");
                __builder2.AddAttribute(588, "class", "modal p-0 fade");
                __builder2.AddAttribute(589, "id", "modalConfirm");
                __builder2.AddAttribute(590, "data-backdrop", "static");
                __builder2.AddAttribute(591, "tabindex", "-1");
                __builder2.AddAttribute(592, "role", "dialog");
                __builder2.AddMarkupContent(593, "\r\n        ");
                __builder2.OpenElement(594, "div");
                __builder2.AddAttribute(595, "class", "modal-dialog ");
                __builder2.AddAttribute(596, "role", "document");
                __builder2.AddMarkupContent(597, "\r\n            ");
                __builder2.OpenElement(598, "div");
                __builder2.AddAttribute(599, "class", "modal-content");
                __builder2.AddMarkupContent(600, "\r\n                ");
                __builder2.OpenElement(601, "div");
                __builder2.AddAttribute(602, "class", "modal-header");
                __builder2.AddMarkupContent(603, "\r\n                    ");
                __builder2.AddMarkupContent(604, "<h5 class=\"modal-title\">CONFIRMAR</h5>\r\n                    ");
                __builder2.OpenElement(605, "button");
                __builder2.AddAttribute(606, "type", "button");
                __builder2.AddAttribute(607, "class", "close");
                __builder2.AddAttribute(608, "data-dismiss", "modal");
                __builder2.AddAttribute(609, "aria-label", "Close");
                __builder2.AddAttribute(610, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 444 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                          (async () => { await ModalConfirmToggle(); })

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(611, "\r\n                        ");
                __builder2.AddMarkupContent(612, "<span aria-hidden=\"true\">&times;</span>\r\n                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(613, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(614, "\r\n                ");
                __builder2.OpenElement(615, "div");
                __builder2.AddAttribute(616, "class", "modal-body p-3 m-2");
                __builder2.AddAttribute(617, "data-spy", "scroll");
                __builder2.AddMarkupContent(618, "\r\n\r\n                    ");
                __builder2.AddMarkupContent(619, "<p><strong>Â¿Desea anular este comprobante? Una vez anulado no podrÃ¡ volver atrÃ¡s.</strong></p>\r\n                    ");
                __builder2.OpenElement(620, "div");
                __builder2.AddAttribute(621, "class", "col-md-12 d-flex justify-content-center mt-4");
                __builder2.AddContent(622, " ");
                __builder2.OpenElement(623, "button");
                __builder2.AddAttribute(624, "class", "btn btn-success col-md-4");
                __builder2.AddAttribute(625, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 452 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                    async () => {await  AnularVenta(); await ModalConfirmToggle(); }

#line default
#line hidden
                ));
                __builder2.AddContent(626, "OK");
                __builder2.CloseElement();
                __builder2.OpenElement(627, "button");
                __builder2.AddAttribute(628, "class", "btn btn-light ml-2 col-md-4");
                __builder2.AddAttribute(629, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 452 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
                                                                                                                                                                                                                                                                         ModalConfirmToggle

#line default
#line hidden
                ));
                __builder2.AddContent(630, "CANCELAR");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(631, "\r\n                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(632, "\r\n\r\n            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(633, "\r\n        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(634, "\r\n    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(635, "\r\n\r\n");
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#line 461 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Ventas\Ventas.razor"
       
    public string cadenaBusqueda { get; set; }
    public string cadenafiltroBusqueda { get; set; } = String.Empty;
    public string criterioBusqueda { get; set; } = "Razon Social";
    public DateTime fechaDesde { get; set; } = DateTime.Now.AddHours(-3).Date;
    public DateTime fechaHasta { get; set; } = DateTime.Now.AddHours(-3).Date;
    public Sucursal sucursal { get; set; } = VariablesGlobales.sucursal;
    public UserInfo user { get; set; }
    public List<Sucursal> sucursales { get; set; } = new List<Sucursal>();
    public List<UserInfo> users { get; set; } = new List<UserInfo>();
    public List<FacturaDto> ventas { get; set; } = new List<FacturaDto>();
    public List<FacturaDto> ventasBuscadas { get; set; } = new List<FacturaDto>();
    public FacturaDto venta { get; set; } = new FacturaDto { comprobante = new Comprobante { personaJuridica = new Cliente(), sucursal = new Sucursal() }, detalles = new List<DetalleFactura>() };

    protected override async Task OnInitializedAsync()
    {

       
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();

        await ListarUsuarios();
        await ListarSucursales();
        user = users.Where(x => x.username == authState.User.Identity.Name).First();

        await ListarVentas();


    }

    protected async Task ListarUsuarios()
    {
        users = await http.GetJsonAsync<List<UserInfo>>("/api/Cuentas/Usuarios");

    }
    protected async Task ListarSucursales()
    {
        sucursales = await http.GetJsonAsync<List<Sucursal>>("/api/Sucursal/Listar");


    }
    protected async Task ListarVentas()
    {
        Console.WriteLine($"/api/Comprobante/ListarVentas/{sucursal.SucursalId}/{user.username}/{fechaDesde.ToString("dd-MM-yyyy")}/{fechaHasta.ToString("dd-MM-yyyy")}");
        if (user.username == null || user.username == "")
        {
            ventas = await http.GetJsonAsync<List<FacturaDto>>($"/api/Comprobante/ListarVentas/{sucursal.SucursalId}/TODOS/{fechaDesde.ToString("dd-MM-yyyy")}/{fechaHasta.ToString("dd-MM-yyyy")}");

        }
        else
        {
            ventas = await http.GetJsonAsync<List<FacturaDto>>($"/api/Comprobante/ListarVentas/{sucursal.SucursalId}/{user.username}/{fechaDesde.ToString("dd-MM-yyyy")}/{fechaHasta.ToString("dd-MM-yyyy")}");

        }
        if (ventas.Count > 0)
        {
            venta = ventas.Last();
            cadenaBusqueda = Convert.ToString(venta.comprobante.codigo);
        }
        else
        {
            venta = new FacturaDto { comprobante = new Comprobante { personaJuridica = new Cliente(), sucursal = new Sucursal() }, detalles = new List<DetalleFactura>() };
            cadenaBusqueda = "";

        }
        ventasBuscadas = ventas;

    }

    protected async Task AnularVenta()
    {

        await http.DeleteAsync($"/api/Comprobante/AnularVenta/{venta.comprobante.ComprobanteId}");
        await ListarVentas();
        await Alerta("top-end", "info", "Se anulo el comprobante");

    }

    protected async Task BuscarVenta(string codigo)
    {
        FacturaDto ventaEncontrada = null;
        try
        {
            ventaEncontrada = ventas.Where(x => x.comprobante.codigo == codigo).First();

        }
        catch (Exception)
        {

        }

        if (ventaEncontrada != null)
        {
            venta = ventaEncontrada;

        }
        else
        {
            cadenaBusqueda = Convert.ToString(venta.comprobante.codigo);
            await Alerta("top-end", "error", "Venta inexistente");

        }

    }




    protected void FiltrarVenta(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            if (cadenafiltroBusqueda != "" && cadenafiltroBusqueda != string.Empty)
            {
                try
                {
                    if (criterioBusqueda == "Codigo")
                    {
                        ventasBuscadas = ventas.Where(x => x.comprobante.codigo.ToString().ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }
                    if (criterioBusqueda == "Cliente")
                    {
                        ventasBuscadas = ventas.Where(x => x.comprobante.personaJuridica.razonSocial.ToLower().Contains(cadenafiltroBusqueda.ToLower())).ToList();
                    }

                }
                catch (Exception)
                {


                }

            }
            else { ventasBuscadas = ventas; }
        }
    }


    public async Task Alerta(string posicion = "top-end", string icono = "success", string mensaje = "Se creÃ³ el producto con Ã©xito")
    {
        await js.InvokeAsync<object>("alerta", posicion, icono, mensaje);
    }

    public async Task ModalToggle()
    {
        await js.InvokeAsync<object>("ModalToggle");
    }

    public async Task ModalConfirmToggle()
    {
        await js.InvokeAsync<object>("ModalConfirmToggle");
    }


    protected async void DescargarVentasExcel()
    {

        using (var package = new ExcelPackage())
        {
            var worksheet = package.Workbook.Worksheets.Add($"Ventas");

            // Use LINQ to project data into the worksheet
            worksheet.DefaultColWidth = 24;
            worksheet.DefaultRowHeight = 13.2;
            worksheet.Cells["A1:T40"].Style.Fill.PatternType = ExcelFillStyle.Solid;
            worksheet.Cells["A1:T40"].Style.Fill.BackgroundColor.SetColor(Color.White);
            var tableBody = worksheet.Cells["B4:G4"].LoadFromCollection(
            from v in ventasBuscadas.OrderBy(x => x.comprobante.sucursal.nombreSucursal).ThenBy(x => x.comprobante.fechaAlta)
            select new { v.comprobante.sucursal.nombreSucursal, v.comprobante.UserName, v.comprobante.codigo, v.comprobante.fechaAlta, v.comprobante.personaJuridica.razonSocial, v.comprobante.importe }, true);

            tableBody.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center;
            tableBody.Style.VerticalAlignment = ExcelVerticalAlignment.Center;
            tableBody.Style.Fill.PatternType = ExcelFillStyle.Solid;
            tableBody.Style.Fill.BackgroundColor.SetColor(Color.White);
            tableBody.Style.Font.Color.SetColor(Color.Black);
            tableBody.Style.Border.BorderAround(ExcelBorderStyle.Dashed);

            worksheet.DefaultColWidth = 24;
            worksheet.DefaultRowHeight = 13.2;
            var encabezado = worksheet.Cells[1, 2, 2, 6];


            encabezado.Style.Font.Bold = true;
            encabezado.Merge = true;
            encabezado.Style.HorizontalAlignment = ExcelHorizontalAlignment.Left;
            encabezado.Style.VerticalAlignment = ExcelVerticalAlignment.Center;
            encabezado.Style.Font.Size = 14;
            encabezado.Value = "INFORME DE VENTAS";



            //worksheet.Cells[4, 6, tableBody.Rows + 3, 6].Formula = $"C5*D5-E5";
            //worksheet.Calculate();

            // Formatting
            var titulopro = worksheet.Cells["B3:F3"];
            worksheet.Row(3).Height = 30;
            titulopro.Merge = true;
            titulopro.Value = $"Desde:{fechaDesde.ToString("dd/MM/yyyy")} Hasta:{fechaHasta.ToString("dd/MM/yyyy")} - Sucursal: {sucursal.nombreSucursal} - Vendedor:{user.username}";
            titulopro.Style.Fill.PatternType = ExcelFillStyle.Solid;
            titulopro.Style.Fill.BackgroundColor.SetColor(Color.White);
            titulopro.Style.Font.Color.SetColor(Color.Black);
            titulopro.Style.Font.Bold = false;
            titulopro.Style.Font.Size = 14;

            var header = worksheet.Cells["B4:G4"];
            worksheet.Cells["B4"].Value = "SUCURSAL";
            worksheet.Cells["C4"].Value = "VENDEDOR";
            worksheet.Cells["D4"].Value = "CODIGO";
            worksheet.Cells["E4"].Value = "FECHA";
            worksheet.Cells["F4"].Value = "CLIENTE";
            worksheet.Column(5).Style.Numberformat.Format = "dd-mm-yyyy HH:mm";
            worksheet.Column(7).Style.Numberformat.Format = "$#,##0.00";

            var total = worksheet.Cells[$"G{5 + ventasBuscadas.Count()}"];

            total.Value = ventasBuscadas.Sum(x => x.comprobante.importe);
            total.Style.Fill.BackgroundColor.SetColor(Color.AliceBlue);
            total.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center;
            total.Style.VerticalAlignment = ExcelVerticalAlignment.Center;
            total.Style.Fill.PatternType = ExcelFillStyle.Solid;
            total.Style.Border.BorderAround(ExcelBorderStyle.Medium);

            header.Style.Font.Bold = true;
            header.Style.Font.Color.SetColor(Color.Black);
            header.Style.Font.Bold = true;

            header.Style.HorizontalAlignment = ExcelHorizontalAlignment.Center;
            header.Style.VerticalAlignment = ExcelVerticalAlignment.Center;
            header.Style.Fill.PatternType = ExcelFillStyle.Solid;
            header.Style.Fill.BackgroundColor.SetColor(Color.AliceBlue);
            header.Style.Border.BorderAround(ExcelBorderStyle.Medium);





            await js.InvokeAsync<object>("saveAsFile", $"Informe de Ventas.xlsx", package.GetAsByteArray());

        }

    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime js { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
#pragma warning restore 1591
