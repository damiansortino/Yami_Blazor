#pragma checksum "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "122b936f56b307be9685ed279188d409455717a6"
// <auto-generated/>
#pragma warning disable 1591
namespace LaymarClientSide.Client.Pages.Tesoreria
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#line 2 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#line 3 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#line 4 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#line 6 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client;

#line default
#line hidden
#line 7 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Shared;

#line default
#line hidden
#line 8 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#line 9 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Client.Helpers;

#line default
#line hidden
#line 10 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using LaymarClientSide.Shared;

#line default
#line hidden
#line 11 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#line 12 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml;

#line default
#line hidden
#line 13 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using OfficeOpenXml.Style;

#line default
#line hidden
#line 14 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\_Imports.razor"
using System.Drawing;

#line default
#line hidden
#line 2 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
using LaymarClientSide.Shared.Entidades;

#line default
#line hidden
#line 5 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
           [Authorize(Roles = "Tesoreria, Admin")]

#line default
#line hidden
    [Microsoft.AspNetCore.Components.RouteAttribute("/caja")]
    public partial class CajaComponent : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "h2");
            __builder.AddAttribute(1, "class", "mt-2");
            __builder.AddMarkupContent(2, "\r\n    ");
            __builder.OpenElement(3, "strong");
            __builder.AddMarkupContent(4, "\r\n        ");
            __builder.OpenElement(5, "span");
            __builder.AddAttribute(6, "class", "badge badge-light");
            __builder.AddMarkupContent(7, "\r\n            ");
            __builder.OpenElement(8, "strong");
            __builder.AddMarkupContent(9, "\r\n                CAJA AL  ");
            __builder.OpenElement(10, "span");
            __builder.AddContent(11, 
#line 12 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                DateTime.Now.AddHours(-3).ToString("dd/MM/yyyy")

#line default
#line hidden
            );
            __builder.AddContent(12, " -  ");
            __builder.AddContent(13, 
#line 12 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                     VariablesGlobales.sucursal.nombreSucursal

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(14, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(16, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(17, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(18, "\r\n\r\n");
#line 18 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
 if (!ExisteCajaDiariaBandera)
{

#line default
#line hidden
            __builder.AddContent(19, "    ");
            __builder.OpenElement(20, "div");
            __builder.AddAttribute(21, "class", "input-group mb-2 col-md-12 mt-2");
            __builder.AddMarkupContent(22, "\r\n        ");
            __builder.OpenElement(23, "div");
            __builder.AddAttribute(24, "class", "col-md-4 px-0");
            __builder.AddMarkupContent(25, "\r\n            ");
            __builder.OpenElement(26, "div");
            __builder.AddAttribute(27, "class", "input-group input-group-sm mb-1 mt-1");
            __builder.AddMarkupContent(28, "\r\n                ");
            __builder.AddMarkupContent(29, "<div class=\"input-group-prepend\">\r\n                    <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">MONTO INICIAL $</span>\r\n                </div>\r\n                ");
            __builder.OpenElement(30, "input");
            __builder.AddAttribute(31, "type", "number");
            __builder.AddAttribute(32, "step", "0.01");
            __builder.AddAttribute(33, "class", "form-control");
            __builder.AddAttribute(34, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 26 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                    montoInicial

#line default
#line hidden
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(35, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => montoInicial = __value, montoInicial, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(36, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(37, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(38, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(39, "\r\n    ");
            __builder.OpenElement(40, "div");
            __builder.AddAttribute(41, "class", "col-md-12 mx-0 row");
            __builder.AddMarkupContent(42, "\r\n        ");
            __builder.OpenElement(43, "button");
            __builder.AddAttribute(44, "class", "btn btn-success");
            __builder.AddAttribute(45, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 31 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                    async()=> await CrearCajaDiaria()

#line default
#line hidden
            ));
            __builder.AddContent(46, "INICIAR CAJA DIARIA");
            __builder.CloseElement();
            __builder.AddMarkupContent(47, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(48, "\r\n");
#line 33 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
}
else
{


#line default
#line hidden
            __builder.AddContent(49, "    ");
            __builder.OpenElement(50, "div");
            __builder.AddAttribute(51, "class", "card d-flex justify-content-center bg-light mt-4 p-4 col-md-12 row mx-0");
            __builder.AddMarkupContent(52, "\r\n        ");
            __builder.OpenElement(53, "h3");
            __builder.AddAttribute(54, "class", "col-md-12 row mx-0 ");
            __builder.OpenElement(55, "strong");
            __builder.AddMarkupContent(56, "MONTO: <i class=\"fas fa-money-bill-wave text-success mx-2\"></i> $ ");
            __builder.AddContent(57, 
#line 38 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                                                   caja.montoCaja

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(58, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(59, "\r\n");
            __builder.AddContent(60, "    ");
            __builder.OpenElement(61, "button");
            __builder.AddAttribute(62, "class", "btn btn-info mt-2");
            __builder.AddAttribute(63, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 41 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                 ModalToggle

#line default
#line hidden
            ));
            __builder.AddContent(64, " Nuevo Movimiento de Caja");
            __builder.CloseElement();
            __builder.AddMarkupContent(65, "\r\n");
#line 43 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
     if (movimientosCaja.Count > 0)
    {


#line default
#line hidden
            __builder.AddContent(66, "        ");
            __builder.OpenElement(67, "table");
            __builder.AddAttribute(68, "class", "table mt-4");
            __builder.AddMarkupContent(69, "\r\n            ");
            __builder.AddMarkupContent(70, @"<thead class=""bg-dark text-white"">
                <tr>
                    <td>Tipo</td>
                    <td>Fecha</td>
                    <td>Comprobante</td>

                    <td>Entra</td>
                    <td>Sale</td>

                    <td>Importe</td>

                </tr>
            </thead>
            ");
            __builder.OpenElement(71, "tbody");
            __builder.AddMarkupContent(72, "\r\n");
#line 61 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                 foreach (MovimientoCaja movimiento in movimientosCaja)
                {


#line default
#line hidden
            __builder.AddContent(73, "                    ");
            __builder.OpenElement(74, "tr");
            __builder.AddAttribute(75, "class", 
#line 64 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                 movimiento.fechaBaja != null? "text-danger":""

#line default
#line hidden
            );
            __builder.AddMarkupContent(76, "\r\n                        ");
            __builder.OpenElement(77, "td");
            __builder.AddContent(78, 
#line 65 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                             movimiento.tipoMovimientoCaja.nombreTipoMovimientoCaja

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(79, "\r\n                        ");
            __builder.OpenElement(80, "td");
            __builder.AddContent(81, 
#line 66 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                             movimiento.fechaAlta

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(82, "\r\n                        ");
            __builder.OpenElement(83, "td");
            __builder.OpenElement(84, "div");
            __builder.AddAttribute(85, "class", "btn btn-link");
            __builder.AddContent(86, 
#line 67 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                        movimiento.comprobante != null ? movimiento.comprobante.codigo : ""

#line default
#line hidden
            );
            __builder.AddContent(87, " ");
            __builder.OpenElement(88, "strong");
            __builder.AddAttribute(89, "class", "text-danger");
            __builder.AddContent(90, 
#line 67 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                                                                                           movimiento.fechaBaja != null? " (ANULADO)":""

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(91, "\r\n\r\n                        ");
            __builder.OpenElement(92, "td");
            __builder.OpenElement(93, "i");
            __builder.AddAttribute(94, "class", 
#line 69 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                        movimiento.entra ? " fas fa-check text-success" : "fas fa-times text-danger" 

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(95, "\r\n                        ");
            __builder.OpenElement(96, "td");
            __builder.OpenElement(97, "i");
            __builder.AddAttribute(98, "class", 
#line 70 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                        movimiento.sale ? " fas fa-check text-success" : "fas fa-times text-danger" 

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(99, "\r\n                        ");
            __builder.OpenElement(100, "td");
            __builder.AddContent(101, "$ ");
            __builder.AddContent(102, 
#line 71 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                               movimiento.importe

#line default
#line hidden
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(103, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(104, "\r\n");
#line 73 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                }

#line default
#line hidden
            __builder.AddContent(105, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(106, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(107, "\r\n");
#line 76 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"


    }


    

#line default
#line hidden
            __builder.AddContent(108, "    ");
            __builder.OpenElement(109, "div");
            __builder.AddAttribute(110, "class", "modal p-0 fade");
            __builder.AddAttribute(111, "id", "modal");
            __builder.AddAttribute(112, "data-backdrop", "static");
            __builder.AddAttribute(113, "tabindex", "-1");
            __builder.AddAttribute(114, "role", "dialog");
            __builder.AddMarkupContent(115, "\r\n        ");
            __builder.OpenElement(116, "div");
            __builder.AddAttribute(117, "class", "modal-dialog rounded border border-solid");
            __builder.AddAttribute(118, "role", "document");
            __builder.AddMarkupContent(119, "\r\n            ");
            __builder.OpenElement(120, "div");
            __builder.AddAttribute(121, "class", "modal-content");
            __builder.AddMarkupContent(122, "\r\n                ");
            __builder.OpenElement(123, "div");
            __builder.AddAttribute(124, "class", "modal-header bg-dark text-white");
            __builder.AddMarkupContent(125, "\r\n                    ");
            __builder.AddMarkupContent(126, "<h5 class=\"modal-title\">Nuevo Movimiento de Caja</h5>\r\n                    ");
            __builder.OpenElement(127, "button");
            __builder.AddAttribute(128, "type", "button");
            __builder.AddAttribute(129, "class", "close");
            __builder.AddAttribute(130, "data-dismiss", "modal");
            __builder.AddAttribute(131, "aria-label", "Close");
            __builder.AddAttribute(132, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#line 87 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                                          (async () => { await ModalToggle();  })

#line default
#line hidden
            ));
            __builder.AddMarkupContent(133, "\r\n                        ");
            __builder.AddMarkupContent(134, "<span class=\"text-danger\" aria-hidden=\"true\">&times;</span>\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(135, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(136, "\r\n                ");
            __builder.OpenElement(137, "div");
            __builder.AddAttribute(138, "class", "modal-body p-2 m-1");
            __builder.AddAttribute(139, "data-spy", "scroll");
            __builder.AddMarkupContent(140, "\r\n                    ");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(141);
            __builder.AddAttribute(142, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#line 93 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                      movimientoCaja

#line default
#line hidden
            ));
            __builder.AddAttribute(143, "OnSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#line 93 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                 CrearMovimientoCaja

#line default
#line hidden
            )));
            __builder.AddAttribute(144, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(145, "\r\n\r\n\r\n\r\n\r\n                        ");
                __builder2.OpenElement(146, "div");
                __builder2.AddAttribute(147, "class", "input-group mb-2 col-md-12 mt-2");
                __builder2.AddMarkupContent(148, "\r\n                            ");
                __builder2.OpenElement(149, "div");
                __builder2.AddAttribute(150, "class", "col-md-12");
                __builder2.AddMarkupContent(151, "\r\n                                ");
                __builder2.OpenElement(152, "div");
                __builder2.AddAttribute(153, "class", "input-group input-group-sm mb-1 mt-1");
                __builder2.AddMarkupContent(154, "\r\n                                    ");
                __builder2.AddMarkupContent(155, "<div class=\"input-group-prepend\">\r\n                                        <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">Tipo Movimiento</span>\r\n                                    </div>\r\n                                    ");
                __builder2.OpenElement(156, "select");
                __builder2.AddAttribute(157, "class", "form-control");
                __builder2.AddAttribute(158, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 104 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                              (ChangeEventArgs e)=> movimientoCaja.tipoMovimientoCaja = tipoMovimientosCaja.Where(x=> x.TipoMovimientoCajaId == Convert.ToInt32(e.Value.ToString())).First()

#line default
#line hidden
                ));
                __builder2.AddMarkupContent(159, "\r\n                                        ");
                __builder2.OpenElement(160, "option");
                __builder2.AddAttribute(161, "selected", true);
                __builder2.AddAttribute(162, "disbled", true);
                __builder2.AddContent(163, "Seleccione una Tipo de Movimiento");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(164, "\r\n");
#line 106 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                         if (tipoMovimientosCaja.Count > 0)
                                        {

                                            

#line default
#line hidden
#line 109 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                             foreach (TipoMovimientoCaja tipo in tipoMovimientosCaja)
                                            {

#line default
#line hidden
                __builder2.AddContent(165, "                                                ");
                __builder2.OpenElement(166, "option");
                __builder2.AddAttribute(167, "value", 
#line 111 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                tipo.TipoMovimientoCajaId

#line default
#line hidden
                );
                __builder2.AddContent(168, 
#line 111 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                            tipo.nombreTipoMovimientoCaja

#line default
#line hidden
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(169, "\r\n");
#line 112 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                            }

#line default
#line hidden
#line 112 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                             
                                        }

#line default
#line hidden
                __builder2.AddMarkupContent(170, "\r\n                                    ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(171, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(172, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(173, "\r\n\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(174, "\r\n                        ");
                __builder2.OpenElement(175, "div");
                __builder2.AddAttribute(176, "class", "col-md-12 row mx-0");
                __builder2.AddMarkupContent(177, "\r\n                            ");
                __builder2.OpenElement(178, "div");
                __builder2.AddAttribute(179, "class", "col-md-6 row mx-0 border border-solid rounded align-items-center");
                __builder2.AddMarkupContent(180, "\r\n                                ");
                __builder2.OpenElement(181, "div");
                __builder2.AddAttribute(182, "class", "col-md-6");
                __builder2.AddMarkupContent(183, "\r\n                                    ");
                __builder2.OpenElement(184, "input");
                __builder2.AddAttribute(185, "type", "radio");
                __builder2.AddAttribute(186, "id", "entra");
                __builder2.AddAttribute(187, "name", "drone");
                __builder2.AddAttribute(188, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 124 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                             (ChangeEventArgs e)=> { if(e.Value.ToString() == "on"){ movimientoCaja.entra=true; movimientoCaja.sale=false; }}

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(189, "\r\n                                    ");
                __builder2.AddMarkupContent(190, "<label for=\"huey\">Entra</label>\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(191, "\r\n\r\n                                ");
                __builder2.OpenElement(192, "div");
                __builder2.AddAttribute(193, "class", "col-md-6");
                __builder2.AddMarkupContent(194, "\r\n                                    ");
                __builder2.OpenElement(195, "input");
                __builder2.AddAttribute(196, "type", "radio");
                __builder2.AddAttribute(197, "id", "sale");
                __builder2.AddAttribute(198, "name", "drone");
                __builder2.AddAttribute(199, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#line 129 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                            (ChangeEventArgs e)=> { if(e.Value.ToString() == "on"){ movimientoCaja.sale=true; movimientoCaja.entra=false; }}

#line default
#line hidden
                ));
                __builder2.CloseElement();
                __builder2.AddMarkupContent(200, "\r\n                                    ");
                __builder2.AddMarkupContent(201, "<label for=\"dewey\">Sale</label>\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(202, "\r\n\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(203, "\r\n\r\n                            ");
                __builder2.OpenElement(204, "div");
                __builder2.AddAttribute(205, "class", "input-group mb-2 col-md-12 mt-2");
                __builder2.AddMarkupContent(206, "\r\n                                ");
                __builder2.OpenElement(207, "div");
                __builder2.AddAttribute(208, "class", "input-group input-group-sm mb-1 mt-1");
                __builder2.AddMarkupContent(209, "\r\n                                    ");
                __builder2.AddMarkupContent(210, "<div class=\"input-group-prepend\">\r\n                                        <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">Importe</span>\r\n                                    </div>\r\n                                    ");
                __builder2.OpenElement(211, "input");
                __builder2.AddAttribute(212, "type", "number");
                __builder2.AddAttribute(213, "step", "0.01");
                __builder2.AddAttribute(214, "class", "form-control");
                __builder2.AddAttribute(215, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#line 140 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
                                                                                                        movimientoCaja.importe

#line default
#line hidden
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(216, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => movimientoCaja.importe = __value, movimientoCaja.importe, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(217, "\r\n\r\n                                ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(218, "\r\n                            ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(219, "\r\n                        ");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(220, "\r\n\r\n                        ");
                __builder2.AddMarkupContent(221, @"<div class=""d-flex justify-content-center row col-md-12 mx-0 mt-2 mb-3"">

                            <button type=""submit"" class=""btn btn-success col-md-12""><i class=""fas fa-save mr-1""></i> Guardar</button>
                        </div>

                    ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(222, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(223, "\r\n\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(224, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(225, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(226, "\r\n");
#line 157 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
}

#line default
#line hidden
        }
        #pragma warning restore 1998
#line 158 "D:\GIT\AlmaLibre_Blazor\LaymarClientSide\Client\Pages\Tesoreria\CajaComponent.razor"
       
    public Caja caja { get; set; } = new Caja();
    public double montoInicial { get; set; } = 0.00;
    public DateTime fechaCaja { get; set; } = DateTime.Now.AddHours(-3);
    public bool ExisteCajaDiariaBandera { get; set; } = false;
    public List<MovimientoCaja> movimientosCaja { get; set; } = new List<MovimientoCaja>();
    public MovimientoCaja movimientoCaja { get; set; } = new MovimientoCaja();
    public List<TipoMovimientoCaja> tipoMovimientosCaja { get; set; } = new List<TipoMovimientoCaja>();
    protected override async Task OnInitializedAsync()
    {


        await ExisteCajaDiaria();
        await ListarTiposMovimientoCaja();

    }
    protected async Task ExisteCajaDiaria()
    {
        ExisteCajaDiariaBandera = await http.PostJsonAsync<bool>($"/api/Caja/ExisteCajaDia", VariablesGlobales.sucursal);
        if (ExisteCajaDiariaBandera == true)
        {
            await BuscarCaja();
            await ListarMovimientos();
        }
    }

    protected async Task BuscarCaja()
    {
        caja = await http.GetJsonAsync<Caja>($"/api/Caja/Buscar/{VariablesGlobales.sucursal.SucursalId}");

    }

    protected async Task ListarTiposMovimientoCaja()
    {
        tipoMovimientosCaja = await http.GetJsonAsync<List<TipoMovimientoCaja>>("/api/TipoMovimientoCaja/Listar");


    }
    protected async Task ListarMovimientos()
    {
        movimientosCaja = await http.GetJsonAsync<List<MovimientoCaja>>($"/api/Caja/ListarMovimientos/{caja.CajaId}");
    }

    protected async Task CrearMovimientoCaja()
    {
        if (movimientoCaja.tipoMovimientoCaja == null || movimientoCaja.tipoMovimientoCaja.TipoMovimientoCajaId == 0)
        {
            await Alerta("top-end", "error", "Tienes que seleccionar un tipo de movimeinto");
        }
        else if (!movimientoCaja.sale && !movimientoCaja.entra)
        {
            await Alerta("top-end", "error", "Tienes que seleccionar si el movimiento es de entrada o salida");
        }
        else if (movimientoCaja.importe == 0 || movimientoCaja.importe < 0)
        {
            await Alerta("top-end", "error", "El importe tiene que ser mayor que cero");

        }
        else
        {
            await http.PostJsonAsync<MovimientoCaja>($"/api/Caja/CrearMovimientoCaja/{caja.CajaId}", movimientoCaja);
            await Alerta("top-end", "success", "Se creo correctamente el movimiento");
            await BuscarCaja();
            await ModalToggle();
            await ListarMovimientos();

        }

    }

    protected async Task CrearCajaDiaria()
    {

        await http.PostJsonAsync<Caja>($"/api/Caja/IniciarCaja/{montoInicial}", VariablesGlobales.sucursal);
        await ExisteCajaDiaria();
    }


    public async Task ModalToggle()
    {
        await js.InvokeAsync<object>("ModalToggle");
    }

    public async Task Alerta(string posicion = "top-end", string icono = "success", string mensaje = "Se creó el proveedor con éxito")
    {
        await js.InvokeAsync<object>("alerta", posicion, icono, mensaje);
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime js { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient http { get; set; }
    }
}
#pragma warning restore 1591
